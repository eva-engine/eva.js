var t,e;t=this,e=function(t,e,s,i){"use strict";var h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])})(t,e)};function r(t,e){function s(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}var n=function(){return(n=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var h in e=arguments[s])Object.prototype.hasOwnProperty.call(e,h)&&(t[h]=e[h]);return t}).apply(this,arguments)};function a(t,e,s,i){var h,r=arguments.length,n=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(h=t[a])&&(n=(r<3?h(n):r>3?h(e,s,n):h(e,s))||n);return r>3&&n&&Object.defineProperty(e,s,n),n}function o(t,e,s,i){return new(s||(s=Promise))((function(h,r){function n(t){try{o(i.next(t))}catch(t){r(t)}}function a(t){try{o(i.throw(t))}catch(t){r(t)}}function o(t){var e;t.done?h(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(n,a)}o((i=i.apply(t,e||[])).next())}))}function l(t,e){var s,i,h,r,n={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,i&&(h=2&r[0]?i.return:r[0]?i.throw||((h=i.return)&&h.call(i),0):i.next)&&!(h=h.call(i,r[1])).done)return h;switch(i=0,h&&(r=[2&r[0],h.value]),r[0]){case 0:case 1:h=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,i=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if(!((h=(h=n.trys).length>0&&h[h.length-1])||6!==r[0]&&2!==r[0])){n=0;continue}if(3===r[0]&&(!h||r[1]>h[0]&&r[1]<h[3])){n.label=r[1];break}if(6===r[0]&&n.label<h[1]){n.label=h[1],h=r;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(r);break}h[2]&&n.ops.pop(),n.trys.pop();continue}r=e.call(t,n)}catch(t){r=[6,t],i=0}finally{s=h=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function p(t){return Object.prototype.toString.call(t)}const c={copyJSON:function(t){return JSON.parse(JSON.stringify(t))},isArray:function(){let t=p([]);return function(e){return p(e)===t}}(),isString:function(){let t=p("s");return function(e){return p(e)===t}}(),isNumber:function(){let t=p(1);return function(e){return p(e)===t}}(),isFunction:function(){let t=p((function(){}));return function(e){return p(e)===t}}(),isUndefined:function(t){return void 0===t},isBoolean:function(){let t=p(!0);return function(e){return p(e)===t}}(),isObject:function(){let t=p({});return function(e){return p(e)===t}}(),random:function(t,e){return this.isArray(t)?t[~~(Math.random()*t.length)]:(this.isNumber(e)||(e=t||1,t=0),t+Math.random()*(e-t))},euclideanModulo:function(t,e){return(t%e+e)%e},codomainBounce:function(t,e,s){return t<e?2*e-t:t>s?2*s-t:t},clamp:function(t,e,s){return t<e?e:t>s?s:t},inRange:(t,e,s)=>t>=e&&t<=s,getAssets(t,e){for(let s=0;s<e.length;s++)if(t===e[s].id)return e[s];return console.error("have not assets name as",t),{}},rgb2hex:t=>(t[0]<<16)+(t[1]<<8)+(0|t[2])};class u{constructor(){this.listeners={},this.addEventListener=this.on,this.removeEventListener=this.off}on(t,e){return c.isFunction(e)?(c.isUndefined(this.listeners[t])&&(this.listeners[t]=[]),this.listeners[t].push(e),this):this}off(t,e){if(c.isUndefined(this.listeners[t]))return this;const s=this.listeners[t];let i=s.length;if(i>0)if(e)for(;i--;)s[i]===e&&s.splice(i,1);else s.length=0;return this}once(t,e){if(!c.isFunction(e))return this;const s=i=>{e(i),this.off(t,s)};return this.on(t,s),this}emit(t,...e){if(c.isUndefined(this.listeners[t]))return this;const s=(this.listeners[t]||[]).slice(0);for(let t=0;t<s.length;t++)s[t].apply(this,e);return this}}const d={},f={Ajax:"Ajax",Texture:"Texture"};var m={Type:f,registerLoaderByType:function(t,e){d[t]=e}};function g(t,e,s){let i,h,r,n,a,o,l=t.length;for(h=0;h<l;h+=1)if(i=t[h],"ks"in i&&!i.completed){if(i.completed=!0,i.tt&&(t[h-1].td=i.tt),i.hasMask){let t=i.masksProperties;for(n=t.length,r=0;r<n;r+=1)if(t[r].pt.k.i)_(t[r].pt.k);else for(o=t[r].pt.k.length,a=0;a<o;a+=1)t[r].pt.k[a].s&&_(t[r].pt.k[a].s[0]),t[r].pt.k[a].e&&_(t[r].pt.k[a].e[0])}0===i.ty?(i.layers=y(i.refId,e),g(i.layers,e)):4===i.ty?v(i.shapes):5==i.ty&&(0!==(p=i).t.a.length||"m"in p.t.p||(p.singleShape=!0))}var p}function y(t,e){let s=0,i=e.length;for(;s<i;){if(e[s].id===t)return e[s].layers.__used?JSON.parse(JSON.stringify(e[s].layers)):(e[s].layers.__used=!0,e[s].layers);s+=1}}function v(t){let e,s,i;for(e=t.length-1;e>=0;e-=1)if("sh"==t[e].ty)if(t[e].ks.k.i)_(t[e].ks.k);else for(i=t[e].ks.k.length,s=0;s<i;s+=1)t[e].ks.k[s].s&&_(t[e].ks.k[s].s[0]),t[e].ks.k[s].e&&_(t[e].ks.k[s].e[0]);else"gr"==t[e].ty&&v(t[e].it)}function _(t){let e,s=t.i.length;for(e=0;e<s;e+=1)t.i[e][0]+=t.v[e][0],t.i[e][1]+=t.v[e][1],t.o[e][0]+=t.v[e][0],t.o[e][1]+=t.v[e][1]}function k(t,e){let s=e?e.split("."):[100,100,100];return t[0]>s[0]||!(s[0]>t[0])&&(t[1]>s[1]||!(s[1]>t[1])&&(t[2]>s[2]||!(s[2]>t[2])&&void 0))}let S=function(){let t=[4,4,14];function e(t){let e=t.t.d;t.t.d={k:[{s:e,t:0}]}}function s(t){let s,i=t.length;for(s=0;s<i;s+=1)5===t[s].ty&&e(t[s])}return function(e){if(k(t,e.v)&&(s(e.layers),e.assets)){let t,i=e.assets.length;for(t=0;t<i;t+=1)e.assets[t].layers&&s(e.assets[t].layers)}}}(),x=function(){let t=[4,7,99];return function(e){if(e.chars&&!k(t,e.v)){let t,s,i,h,r,n=e.chars.length;for(t=0;t<n;t+=1)if(e.chars[t].data&&e.chars[t].data.shapes)for(r=e.chars[t].data.shapes[0].it,i=r.length,s=0;s<i;s+=1)h=r[s].ks.k,h.__converted||(_(r[s].ks.k),h.__converted=!0)}}}(),T=function(){let t=[4,1,9];function e(t){let s,i,h,r=t.length;for(s=0;s<r;s+=1)if("gr"===t[s].ty)e(t[s].it);else if("fl"===t[s].ty||"st"===t[s].ty)if(t[s].c.k&&t[s].c.k[0].i)for(h=t[s].c.k.length,i=0;i<h;i+=1)t[s].c.k[i].s&&(t[s].c.k[i].s[0]/=255,t[s].c.k[i].s[1]/=255,t[s].c.k[i].s[2]/=255,t[s].c.k[i].s[3]/=255),t[s].c.k[i].e&&(t[s].c.k[i].e[0]/=255,t[s].c.k[i].e[1]/=255,t[s].c.k[i].e[2]/=255,t[s].c.k[i].e[3]/=255);else t[s].c.k[0]/=255,t[s].c.k[1]/=255,t[s].c.k[2]/=255,t[s].c.k[3]/=255}function s(t){let s,i=t.length;for(s=0;s<i;s+=1)4===t[s].ty&&e(t[s].shapes)}return function(e){if(k(t,e.v)&&(s(e.layers),e.assets)){let t,i=e.assets.length;for(t=0;t<i;t+=1)e.assets[t].layers&&s(e.assets[t].layers)}}}(),P=function(){let t=[4,4,18];function e(t){let s,i,h;for(s=t.length-1;s>=0;s-=1)if("sh"==t[s].ty)if(t[s].ks.k.i)t[s].ks.k.c=t[s].closed;else for(h=t[s].ks.k.length,i=0;i<h;i+=1)t[s].ks.k[i].s&&(t[s].ks.k[i].s[0].c=t[s].closed),t[s].ks.k[i].e&&(t[s].ks.k[i].e[0].c=t[s].closed);else"gr"==t[s].ty&&e(t[s].it)}function s(t){let s,i,h,r,n,a,o=t.length;for(i=0;i<o;i+=1){if(s=t[i],s.hasMask){let t=s.masksProperties;for(r=t.length,h=0;h<r;h+=1)if(t[h].pt.k.i)t[h].pt.k.c=t[h].cl;else for(a=t[h].pt.k.length,n=0;n<a;n+=1)t[h].pt.k[n].s&&(t[h].pt.k[n].s[0].c=t[h].cl),t[h].pt.k[n].e&&(t[h].pt.k[n].e[0].c=t[h].cl)}4===s.ty&&e(s.shapes)}}return function(e){if(k(t,e.v)&&(s(e.layers),e.assets)){let t,i=e.assets.length;for(t=0;t<i;t+=1)e.assets[t].layers&&s(e.assets[t].layers)}}}();var M={completeData:function(t,e){t.__complete||(T(t),S(t),x(t),P(t),g(t.layers,t.assets),t.__complete=!0)},checkColors:T,checkChars:x,checkShapes:P,completeLayers:g};let w=.1,b="function"==typeof Float32Array;function D(t,e){return 1-3*e+3*t}function C(t,e){return 3*e-6*t}function L(t){return 3*t}function A(t,e,s){return((D(e,s)*t+C(e,s))*t+L(e))*t}function O(t,e,s){return 3*D(e,s)*t*t+2*C(e,s)*t+L(e)}function F(t,e,s,i){if(!(0<=t&&t<=1&&0<=s&&s<=1))throw new Error("bezier x values must be in [0, 1] range");this.mX1=t,this.mY1=e,this.mX2=s,this.mY2=i,this.sampleValues=b?new Float32Array(11):new Array(11),this._preCompute(),this.get=this.get.bind(this)}F.prototype._preCompute=function(){if(this.mX1!==this.mY1||this.mX2!==this.mY2)for(let t=0;t<11;++t)this.sampleValues[t]=A(t*w,this.mX1,this.mX2)},F.prototype._getTForX=function(t){let e=0,s=1;for(;10!==s&&this.sampleValues[s]<=t;++s)e+=w;--s;let i=e+(t-this.sampleValues[s])/(this.sampleValues[s+1]-this.sampleValues[s])*w,h=O(i,this.mX1,this.mX2);return h>=.001?function(t,e,s,i){for(let h=0;h<4;++h){let h=O(e,s,i);if(0===h)return e;e-=(A(e,s,i)-t)/h}return e}(t,i,this.mX1,this.mX2):0===h?i:function(t,e,s,i,h){let r,n,a=0;do{n=e+(s-e)/2,r=A(n,i,h)-t,r>0?s=n:e=n}while(Math.abs(r)>1e-7&&++a<10);return n}(t,e,e+w,this.mX1,this.mX2)},F.prototype.get=function(t){return this.mX1===this.mY1&&this.mX2===this.mY2?t:0===t?0:1===t?1:A(this._getTForX(t),this.mY1,this.mY2)};const I={};var E={getBezierEasing:function(t,e,s,i,h){const r=h||("bez_"+t+"_"+e+"_"+s+"_"+i).replace(/\./g,"p");if(I[r])return I[r];const n=new F(t,e,s,i);return I[r]=n,n}};let V;function N(t){return new Array(t)}V="function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(t,e){return"float32"===t?new Float32Array(e):"int16"===t?new Int16Array(e):"uint8c"===t?new Uint8ClampedArray(e):void 0}:function(t,e){let s=0;const i=[];let h;switch(t){case"int16":case"uint8c":h=1;break;default:h=1.1}for(s=0;s<e;s+=1)i.push(h);return i};var q={double:function(t){return t.concat(N(t.length))}};const j=function(t,e,s){let i=0,h=t,r=N(h);return{newElement:function(){let t;return i?(i-=1,t=r[i]):t=e(),t},release:function(t){i===h&&(r=q.double(r),h*=2),s&&s(t),r[i]=t,i+=1}}},B=j(8,(function(){return V("float32",2)}));class R{constructor(){this.c=!1,this._length=0,this._maxLength=8,this.v=N(this._maxLength),this.o=N(this._maxLength),this.i=N(this._maxLength)}setPathData(t,e){this.c=t,this.setLength(e);let s=0;for(;s<e;)this.v[s]=B.newElement(),this.o[s]=B.newElement(),this.i[s]=B.newElement(),s+=1}setLength(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t}doubleArrayLength(){this.v=this.v.concat(N(this._maxLength)),this.i=this.i.concat(N(this._maxLength)),this.o=this.o.concat(N(this._maxLength)),this._maxLength*=2}setXYAt(t,e,s,i,h){let r;switch(this._length=Math.max(this._length,i+1),this._length>=this._maxLength&&this.doubleArrayLength(),s){case"v":r=this.v;break;case"i":r=this.i;break;case"o":r=this.o}(!r[i]||r[i]&&!h)&&(r[i]=B.newElement()),r[i][0]=t,r[i][1]=e}setTripleAt(t,e,s,i,h,r,n,a){this.setXYAt(t,e,"v",n,a),this.setXYAt(s,i,"o",n,a),this.setXYAt(h,r,"i",n,a)}reverse(){const t=new R;t.setPathData(this.c,this._length);const e=this.v,s=this.o,i=this.i;let h=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],i[0][0],i[0][1],s[0][0],s[0][1],0,!1),h=1);let r=this._length-1;const n=this._length;for(let a=h;a<n;a+=1)t.setTripleAt(e[r][0],e[r][1],i[r][0],i[r][1],s[r][0],s[r][1],a,!1),r-=1;return t}}const X=j(4,(function(){return new R}),(function(t){const e=t._length;for(let s=0;s<e;s+=1)B.release(t.v[s]),B.release(t.i[s]),B.release(t.o[s]),t.v[s]=null,t.i[s]=null,t.o[s]=null;t._length=0,t.c=!1}));X.clone=function(t){const e=X.newElement(),s=void 0===t._length?t.v.length:t._length;e.setLength(s),e.c=t.c;for(let i=0;i<s;i+=1)e.setTripleAt(t.v[i][0],t.v[i][1],t.o[i][0],t.o[i][1],t.i[i][0],t.i[i][1],i);return e};class Y{constructor(){this._length=0,this._maxLength=4,this.shapes=N(this._maxLength)}addShape(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(N(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1}releaseShapes(){for(let t=0;t<this._length;t+=1)X.release(this.shapes[t]);this._length=0}}let G=0,U=4,z=N(U);var W={newShapeCollection:function(){let t;return G?(G-=1,t=z[G]):t=new Y,t},release:function(t){const e=t._length;for(let s=0;s<e;s+=1)X.release(t.shapes[s]);t._length=0,G===U&&(z=q.double(z),U*=2),z[G]=t,G+=1}};class J{outTypeExpressionMode(){this._hasOutTypeExpression=!0,this.container&&this.container.outTypeExpressionMode()}addDynamicProperty(t){-1===this.dynamicProperties.indexOf(t)&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0,t._hasOutTypeExpression&&this.outTypeExpressionMode())}iterateDynamicProperties(t){this._mdf=!1;const e=this.dynamicProperties.length;for(let s=0;s<e;s+=1)this.dynamicProperties[s].getValue(t),this.dynamicProperties[s]._mdf&&(this._mdf=!0)}initDynamicPropertyContainer(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1,this._hasOutTypeExpression=!1}}const H=j(8,(function(){return{addedLength:0,percents:V("float32",200),lengths:V("float32",200)}})),K=j(8,(function(){return{lengths:[],totalLength:0}}),(function(t){const e=t.lengths.length;for(let s=0;s<e;s+=1)H.release(t.lengths[s]);t.lengths.length=0}));function Z(t,e,s,i,h,r){const n=t*i+e*h+s*r-h*i-r*t-s*e;return n>-.001&&n<.001}function $(t,e,s,i){let h,r=0;const n=[],a=[],o=H.newElement(),l=s.length;for(let p=0;p<200;p+=1){const c=p/199;h=0;for(let r=0;r<l;r+=1){const o=Math.pow(1-c,3)*t[r]+3*Math.pow(1-c,2)*c*s[r]+3*(1-c)*Math.pow(c,2)*i[r]+Math.pow(c,3)*e[r];n[r]=o,null!==a[r]&&(h+=Math.pow(n[r]-a[r],2)),a[r]=n[r]}h&&(h=Math.sqrt(h),r+=h),o.percents[p]=c,o.lengths[p]=r}return o.addedLength=r,o}function Q(t){this.segmentLength=0,this.points=new Array(t)}function tt(t,e){this.partialLength=t,this.point=e}const et={};function st(t,e){const s=e.percents,i=e.lengths,h=s.length;let r=Math.floor((h-1)*t);const n=t*e.addedLength;let a=0;if(r===h-1||0===r||n===i[r])return s[r];{const t=i[r]>n?-1:1;let e=!0;for(;e;)if(i[r]<=n&&i[r+1]>n?(a=(n-i[r])/(i[r+1]-i[r]),e=!1):r+=t,r<0||r>=h-1){if(r===h-1)return s[r];e=!1}return s[r]+(s[r+1]-s[r])*a}}const it=V("float32",8);var ht={getSegmentsLength:function(t){const e=K.newElement(),s=t.c,i=t.v,h=t.o,r=t.i,n=t._length,a=e.lengths;let o=0,l=0;for(;l<n-1;l+=1)a[l]=$(i[l],i[l+1],h[l],r[l+1]),o+=a[l].addedLength;return s&&n&&(a[l]=$(i[l],i[0],h[l],r[0]),o+=a[l].addedLength),e.totalLength=o,e},getNewSegment:function(t,e,s,i,h,r,n){const a=st(h=h<0?0:h>1?1:h,n),o=st(r=r>1?1:r,n),l=t.length,p=1-a,c=1-o,u=p*p*p,d=a*p*p*3,f=a*a*p*3,m=a*a*a,g=p*p*c,y=a*p*c+p*a*c+p*p*o,v=a*a*c+p*a*o+a*p*o,_=a*a*o,k=p*c*c,S=a*c*c+p*o*c+p*c*o,x=a*o*c+p*o*o+a*c*o,T=a*o*o,P=c*c*c,M=o*c*c+c*o*c+c*c*o,w=o*o*c+c*o*o+o*c*o,b=o*o*o;for(let h=0;h<l;h+=1)it[4*h]=Math.round(1e3*(u*t[h]+d*s[h]+f*i[h]+m*e[h]))/1e3,it[4*h+1]=Math.round(1e3*(g*t[h]+y*s[h]+v*i[h]+_*e[h]))/1e3,it[4*h+2]=Math.round(1e3*(k*t[h]+S*s[h]+x*i[h]+T*e[h]))/1e3,it[4*h+3]=Math.round(1e3*(P*t[h]+M*s[h]+w*i[h]+b*e[h]))/1e3;return it},getPointInSegment:function(t,e,s,i,h,r){const n=st(h,r),a=1-n;return[Math.round(1e3*(a*a*a*t[0]+(n*a*a+a*n*a+a*a*n)*s[0]+(n*n*a+a*n*n+n*a*n)*i[0]+n*n*n*e[0]))/1e3,Math.round(1e3*(a*a*a*t[1]+(n*a*a+a*n*a+a*a*n)*s[1]+(n*n*a+a*n*n+n*a*n)*i[1]+n*n*n*e[1]))/1e3]},buildBezierData:function(t,e,s,i){const h=(t[0]+"_"+t[1]+"_"+e[0]+"_"+e[1]+"_"+s[0]+"_"+s[1]+"_"+i[0]+"_"+i[1]).replace(/\./g,"p");if(!et[h]){let r,n,a=200,o=0,l=null;2===t.length&&(t[0]!=e[0]||t[1]!=e[1])&&Z(t[0],t[1],e[0],e[1],t[0]+s[0],t[1]+s[1])&&Z(t[0],t[1],e[0],e[1],e[0]+i[0],e[1]+i[1])&&(a=2);const p=new Q(a),c=s.length;for(let h=0;h<a;h+=1){n=N(c);const u=h/(a-1);r=0;for(let h=0;h<c;h+=1){const a=Math.pow(1-u,3)*t[h]+3*Math.pow(1-u,2)*u*(t[h]+s[h])+3*(1-u)*Math.pow(u,2)*(e[h]+i[h])+Math.pow(u,3)*e[h];n[h]=a,null!==l&&(r+=Math.pow(n[h]-l[h],2))}r=Math.sqrt(r),o+=r,p.points[h]=new tt(r,n),l=n}p.segmentLength=o,et[h]=p}return et[h]},pointOnLine2D:Z,pointOnLine3D:function(t,e,s,i,h,r,n,a,o){if(0===s&&0===r&&0===o)return Z(t,e,i,h,n,a);const l=Math.sqrt(Math.pow(i-t,2)+Math.pow(h-e,2)+Math.pow(r-s,2)),p=Math.sqrt(Math.pow(n-t,2)+Math.pow(a-e,2)+Math.pow(o-s,2)),c=Math.sqrt(Math.pow(n-i,2)+Math.pow(a-h,2)+Math.pow(o-r,2));let u;return u=l>p?l>c?l-p-c:c-p-l:c>p?c-p-l:p-l-c,u>-1e-4&&u<1e-4}};const rt=-999999,nt=Math.PI/180,at=[0,0],ot=/(loopIn|loopOut)\(([^)]+)/,lt=/["']\w+["']/;class pt{constructor(t,e,s){this.begin=e,this.end=s,this.total=this.end-this.begin,this.type=t}update(t){return"in"===this.type?t>=this.begin?t:this.end-c.euclideanModulo(this.begin-t,this.total):"out"===this.type?t<=this.end?t:this.begin+c.euclideanModulo(t-this.end,this.total):void 0}}class ct{constructor(t,e,s){this.begin=e,this.end=s,this.total=this.end-this.begin,this.type=t}update(t){if("in"===this.type&&t<this.begin||"out"===this.type&&t>this.end){const e=t-this.end;return this.pingpong(e)}return t}pingpong(t){return Math.floor(t/this.total)%2?this.begin+c.euclideanModulo(t,this.total):this.end-c.euclideanModulo(t,this.total)}}const ut={loopIn(t,e,s){const i=t[0].t,h=t.length-1,r=t[Math.min(h,s)].t;switch(e){case"cycle":return new pt("in",i,r);case"pingpong":return new ct("in",i,r)}return null},loopOut(t,e,s){const i=t.length-1,h=t[Math.max(0,i-s)].t,r=t[i].t;switch(e){case"cycle":return new pt("out",h,r);case"pingpong":return new ct("out",h,r)}return null}};function dt(t){const e=t.match(ot),s=e[2].split(/\s*,\s*/).map((t=>lt.test(t)?t.replace(/"|'/g,""):parseInt(t)));return{name:e[1],mode:s[0],offset:s[1]}}var ft={hasSupportExpression:function(t){return t.x&&ot.test(t.x)},getExpression:function(t){const{name:e,mode:s,offset:i=0}=dt(t.x),h=0===i?t.k.length-1:i;return ut[e]&&ut[e](t.k,s,h)}};function mt(t){const e=t[0]*nt,s=t[1]*nt,i=t[2]*nt,h=Math.cos(e/2),r=Math.cos(s/2),n=Math.cos(i/2),a=Math.sin(e/2),o=Math.sin(s/2),l=Math.sin(i/2);return[a*o*n+h*r*l,a*r*n+h*o*l,h*o*n-a*r*l,h*r*n-a*o*l]}class gt{interpolateValue(t,e){let s;"multidimensional"===this.propType&&(s=V("float32",this.pv.length));let i,h,r,n,a,o,l,p,c=e.lastIndex,u=c,d=this.keyframes.length-1,f=!0;for(;f;){if(i=this.keyframes[u],h=this.keyframes[u+1],u===d-1&&t>=h.t){i.h&&(i=h),c=0;break}if(h.t>t){c=u;break}u<d-1?u+=1:(c=0,f=!1)}let m,g=h.t,y=i.t;if(i.to){i.bezierData||(i.bezierData=ht.buildBezierData(i.s,h.s||i.e,i.to,i.ti));let c=i.bezierData;if(t>=g||t<y){let e=t>=g?c.points.length-1:0;for(n=c.points[e].point.length,r=0;r<n;r+=1)s[r]=c.points[e].point[r]}else{i.__fnct?p=i.__fnct:(p=E.getBezierEasing(i.o.x,i.o.y,i.i.x,i.i.y,i.n).get,i.__fnct=p),a=p((t-y)/(g-y));let h,d=c.segmentLength*a,m=e.lastFrame<t&&e._lastKeyframeIndex===u?e._lastAddedLength:0;for(l=e.lastFrame<t&&e._lastKeyframeIndex===u?e._lastPoint:0,f=!0,o=c.points.length;f;){if(m+=c.points[l].partialLength,0===d||0===a||l===c.points.length-1){for(n=c.points[l].point.length,r=0;r<n;r+=1)s[r]=c.points[l].point[r];break}if(d>=m&&d<m+c.points[l+1].partialLength){for(h=(d-m)/c.points[l+1].partialLength,n=c.points[l].point.length,r=0;r<n;r+=1)s[r]=c.points[l].point[r]+(c.points[l+1].point[r]-c.points[l].point[r])*h;break}l<o-1?l+=1:f=!1}e._lastPoint=l,e._lastAddedLength=m-c.points[l].partialLength,e._lastKeyframeIndex=u}}else{let e,r,n,o,l;if(d=i.s.length,m=h.s||i.e,this.sh&&1!==i.h)t>=g?(s[0]=m[0],s[1]=m[1],s[2]=m[2]):t<=y?(s[0]=i.s[0],s[1]=i.s[1],s[2]=i.s[2]):function(t,e){const s=e[0],i=e[1],h=e[2],r=e[3],n=Math.atan2(2*i*r-2*s*h,1-2*i*i-2*h*h),a=Math.asin(2*s*i+2*h*r),o=Math.atan2(2*s*r-2*i*h,1-2*s*s-2*h*h);t[0]=n/nt,t[1]=a/nt,t[2]=o/nt}(s,function(t,e,s){const i=[],h=t[0],r=t[1],n=t[2],a=t[3];let o,l,p,c,u,d=e[0],f=e[1],m=e[2],g=e[3];return l=h*d+r*f+n*m+a*g,l<0&&(l=-l,d=-d,f=-f,m=-m,g=-g),1-l>1e-6?(o=Math.acos(l),p=Math.sin(o),c=Math.sin((1-s)*o)/p,u=Math.sin(s*o)/p):(c=1-s,u=s),i[0]=c*h+u*d,i[1]=c*r+u*f,i[2]=c*n+u*m,i[3]=c*a+u*g,i}(mt(i.s),mt(m),(t-y)/(g-y)));else for(u=0;u<d;u+=1)1!==i.h&&(t>=g?a=1:t<y?a=0:(i.o.x.constructor===Array?(i.__fnct||(i.__fnct=[]),i.__fnct[u]?p=i.__fnct[u]:(e=void 0===i.o.x[u]?i.o.x[0]:i.o.x[u],r=void 0===i.o.y[u]?i.o.y[0]:i.o.y[u],n=void 0===i.i.x[u]?i.i.x[0]:i.i.x[u],o=void 0===i.i.y[u]?i.i.y[0]:i.i.y[u],p=E.getBezierEasing(e,r,n,o).get,i.__fnct[u]=p)):i.__fnct?p=i.__fnct:(e=i.o.x,r=i.o.y,n=i.i.x,o=i.i.y,p=E.getBezierEasing(e,r,n,o).get,i.__fnct=p),a=p((t-y)/(g-y)))),m=h.s||i.e,l=1===i.h?i.s[u]:i.s[u]+(m[u]-i.s[u])*a,"multidimensional"===this.propType?s[u]=l:s=l}return e.lastIndex=c,s}getValueAtCurrentTime(t){let e=this.keyframes[0].t,s=this.keyframes[this.keyframes.length-1].t;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==rt&&(this._caching.lastFrame>=s&&t>=s||this._caching.lastFrame<e&&t<e))){this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);let e=this.interpolateValue(t,this._caching);this.pv=e}return this._caching.lastFrame=t,this.pv}setVValue(t){let e;if("unidimensional"===this.propType)e=t*this.mult,Math.abs(this.v-e)>1e-5&&(this.v=e,this._mdf=!0);else{let s=0;const i=this.v.length;for(;s<i;)e=t[s]*this.mult,Math.abs(this.v[s]-e)>1e-5&&(this.v[s]=e,this._mdf=!0),s+=1}}processEffectsSequence(t){if(this.expression&&(t=this.expression.update(t)),t===this.frameId||!this.effectsSequence.length)return;if(this.lock)return void this.setVValue(this.pv);let e;this.lock=!0,this._mdf=this._isFirstFrame;let s=this.effectsSequence.length,i=this.kf?this.pv:this.data.k;for(e=0;e<s;e+=1)i=this.effectsSequence[e](t);this.setVValue(i),this._isFirstFrame=!1,this.lock=!1,this.frameId=t}addEffect(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}}class yt extends gt{constructor(t,e,s,i){super(),this.propType="unidimensional",this.mult=s||1,this.data=e,this.v=s?e.k*s:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=i,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=this.processEffectsSequence}}class vt extends gt{constructor(t,e,s,i){super(),this.propType="multidimensional",this.mult=s||1,this.data=e,this._mdf=!1,this.elem=t,this.container=i,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;const h=e.k.length;this.v=V("float32",h),this.pv=V("float32",h),this.vel=V("float32",h);for(let t=0;t<h;t+=1)this.v[t]=e.k[t]*this.mult,this.pv[t]=e.k[t];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=this.processEffectsSequence}}class _t extends gt{constructor(t,e,s,i){super(),this.propType="unidimensional",this.keyframes=e.k,this.frameId=-1,this._caching={lastFrame:rt,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=e,this.mult=s||1,this.elem=t,this.container=i,this.comp=t.comp,this.v=rt,this.pv=rt,this._isFirstFrame=!0,this.getValue=this.processEffectsSequence,this.effectsSequence=[this.getValueAtCurrentTime.bind(this)],this._hasOutTypeExpression=!1,ft.hasSupportExpression(e)&&(this.expression=ft.getExpression(e),this._hasOutTypeExpression="out"===this.expression.type)}}class kt extends gt{constructor(t,e,s,i){let h;super(),this.propType="multidimensional";let r,n,a,o,l=e.k.length;for(h=0;h<l-1;h+=1)e.k[h].to&&e.k[h].s&&e.k[h+1]&&e.k[h+1].s&&(r=e.k[h].s,n=e.k[h+1].s,a=e.k[h].to,o=e.k[h].ti,(2===r.length&&(r[0]!==n[0]||r[1]!==n[1])&&ht.pointOnLine2D(r[0],r[1],n[0],n[1],r[0]+a[0],r[1]+a[1])&&ht.pointOnLine2D(r[0],r[1],n[0],n[1],n[0]+o[0],n[1]+o[1])||3===r.length&&(r[0]!==n[0]||r[1]!==n[1]||r[2]!==n[2])&&ht.pointOnLine3D(r[0],r[1],r[2],n[0],n[1],n[2],r[0]+a[0],r[1]+a[1],r[2]+a[2])&&ht.pointOnLine3D(r[0],r[1],r[2],n[0],n[1],n[2],n[0]+o[0],n[1]+o[1],n[2]+o[2]))&&(e.k[h].to=null,e.k[h].ti=null),r[0]===n[0]&&r[1]===n[1]&&0===a[0]&&0===a[1]&&0===o[0]&&0===o[1]&&(2===r.length||r[2]===n[2]&&0===a[2]&&0===o[2])&&(e.k[h].to=null,e.k[h].ti=null));this.effectsSequence=[this.getValueAtCurrentTime.bind(this)],this.keyframes=e.k,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=s||1,this.elem=t,this.container=i,this.comp=t.comp,this.getValue=this.processEffectsSequence,this.frameId=-1;let p=e.k[0].s.length;for(this.v=V("float32",p),this.pv=V("float32",p),h=0;h<p;h+=1)this.v[h]=rt,this.pv[h]=rt;this._caching={lastFrame:rt,lastIndex:0,value:V("float32",p)},this._hasOutTypeExpression=!1,ft.hasSupportExpression(e)&&(this.expression=ft.getExpression(e),this._hasOutTypeExpression="out"===this.expression.type)}}var St={getProp:function(t,e,s,i,h){let r;if(e.k.length)if("number"==typeof e.k[0])r=new vt(t,e,i,h);else switch(s){case 0:r=new _t(t,e,i,h);break;case 1:r=new kt(t,e,i,h)}else r=new yt(t,e,i,h);return r.effectsSequence.length&&h.addDynamicProperty(r),r}};class xt{interpolateShape(t,e,s){let i,h,r,n,a,o,l,p,c,u=s.lastIndex,d=this.keyframes;if(t<d[0].t)i=d[0].s[0],r=!0,u=0;else if(t>=d[d.length-1].t)i=d[d.length-1].s?d[d.length-1].s[0]:d[d.length-2].e[0],r=!0;else{let e,s,n=u,a=d.length-1,o=!0;for(;o&&(e=d[n],s=d[n+1],!(s.t>t));)n<a-1?n+=1:o=!1;if(r=1===e.h,u=n,!r){if(t>=s.t)p=1;else if(t<e.t)p=0;else{let i;e.__fnct?i=e.__fnct:(i=E.getBezierEasing(e.o.x,e.o.y,e.i.x,e.i.y).get,e.__fnct=i),p=i((t-e.t)/(s.t-e.t))}h=s.s?s.s[0]:e.e[0]}i=e.s[0]}for(o=e._length,l=i.i[0].length,s.lastIndex=u,n=0;n<o;n+=1)for(a=0;a<l;a+=1)c=r?i.i[n][a]:i.i[n][a]+(h.i[n][a]-i.i[n][a])*p,e.i[n][a]=c,c=r?i.o[n][a]:i.o[n][a]+(h.o[n][a]-i.o[n][a])*p,e.o[n][a]=c,c=r?i.v[n][a]:i.v[n][a]+(h.v[n][a]-i.v[n][a])*p,e.v[n][a]=c}interpolateShapeCurrentTime(t){let e=this.keyframes[0].t,s=this.keyframes[this.keyframes.length-1].t,i=this._caching.lastFrame;return i!==rt&&(i<e&&t<e||i>s&&t>s)||(this._caching.lastIndex=i<t?this._caching.lastIndex:0,this.interpolateShape(t,this.pv,this._caching)),this._caching.lastFrame=t,this.pv}resetShape(){this.paths=this.localShapeCollection}shapesEqual(t,e){if(t._length!==e._length||t.c!==e.c)return!1;let s,i=t._length;for(s=0;s<i;s+=1)if(t.v[s][0]!==e.v[s][0]||t.v[s][1]!==e.v[s][1]||t.o[s][0]!==e.o[s][0]||t.o[s][1]!==e.o[s][1]||t.i[s][0]!==e.i[s][0]||t.i[s][1]!==e.i[s][1])return!1;return!0}setVValue(t){this.shapesEqual(this.v,t)||(this.v=X.clone(t),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}processEffectsSequence(t){if(t===this.frameId)return;if(!this.effectsSequence.length)return void(this._mdf=!1);if(this.lock)return void this.setVValue(this.pv);this.lock=!0,this._mdf=!1;let e,s=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k,i=this.effectsSequence.length;for(e=0;e<i;e+=1)s=this.effectsSequence[e](t);this.setVValue(s),this.lock=!1,this.frameId=t}addEffect(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}}class Tt extends xt{constructor(t,e,s){super(),this.propType="shape",this.comp=t.comp,this.container=t,this.elem=t,this.data=e,this.k=!1,this.kf=!1,this._mdf=!1;let i=3===s?e.pt.k:e.ks.k;this.v=X.clone(i),this.pv=X.clone(this.v),this.localShapeCollection=W.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=this.resetShape,this.effectsSequence=[],this.getValue=this.processEffectsSequence}}class Pt extends xt{constructor(t,e,s){super(),this.propType="shape",this.comp=t.comp,this.elem=t,this.container=t,this.keyframes=3===s?e.pt.k:e.ks.k,this.k=!0,this.kf=!0;let i=this.keyframes[0].s[0].i.length;this.v=X.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,i),this.pv=X.clone(this.v),this.localShapeCollection=W.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=rt,this.reset=this.resetShape,this._caching={lastFrame:rt,lastIndex:0},this.effectsSequence=[this.interpolateShapeCurrentTime.bind(this)],this.getValue=this.processEffectsSequence,this._hasOutTypeExpression=!1,ft.hasSupportExpression(e)&&(this.expression=ft.getExpression(e),this._hasOutTypeExpression="out"===this.expression.type)}}class Mt extends J{constructor(t,e){super(),this.v=X.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=W.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=e.d,this.elem=t,this.comp=t.comp,this.frameId=-1,this.initDynamicPropertyContainer(t),this.p=St.getProp(t,e.p,1,0,this),this.s=St.getProp(t,e.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}reset(){this.paths=this.localShapeCollection}getValue(t){t!==this.frameId&&(this.iterateDynamicProperties(t),this.frameId=t,this._mdf&&this.convertEllToPath())}convertEllToPath(){const t=this.p.v[0],e=this.p.v[1],s=this.s.v[0]/2,i=this.s.v[1]/2,h=3!==this.d,r=this.v;r.v[0][0]=t,r.v[0][1]=e-i,r.v[1][0]=h?t+s:t-s,r.v[1][1]=e,r.v[2][0]=t,r.v[2][1]=e+i,r.v[3][0]=h?t-s:t+s,r.v[3][1]=e,r.i[0][0]=h?t-s*Dt:t+s*Dt,r.i[0][1]=e-i,r.i[1][0]=h?t+s:t-s,r.i[1][1]=e-i*Dt,r.i[2][0]=h?t+s*Dt:t-s*Dt,r.i[2][1]=e+i,r.i[3][0]=h?t-s:t+s,r.i[3][1]=e+i*Dt,r.o[0][0]=h?t+s*Dt:t-s*Dt,r.o[0][1]=e-i,r.o[1][0]=h?t+s:t-s,r.o[1][1]=e+i*Dt,r.o[2][0]=h?t-s*Dt:t+s*Dt,r.o[2][1]=e+i,r.o[3][0]=h?t-s:t+s,r.o[3][1]=e-i*Dt}}class wt extends J{constructor(t,e){super(),this.v=X.newElement(),this.v.setPathData(!0,0),this.elem=t,this.comp=t.comp,this.data=e,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),1===e.sy?(this.ir=St.getProp(t,e.ir,0,0,this),this.is=St.getProp(t,e.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=St.getProp(t,e.pt,0,0,this),this.p=St.getProp(t,e.p,1,0,this),this.r=St.getProp(t,e.r,0,nt,this),this.or=St.getProp(t,e.or,0,0,this),this.os=St.getProp(t,e.os,0,.01,this),this.localShapeCollection=W.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}reset(){this.paths=this.localShapeCollection}getValue(t){t!==this.frameId&&(this.frameId=t,this.iterateDynamicProperties(t),this._mdf&&this.convertToPath())}convertStarToPath(){let t,e,s,i,h=2*Math.floor(this.pt.v),r=2*Math.PI/h,n=!0,a=this.or.v,o=this.ir.v,l=this.os.v,p=this.is.v,c=2*Math.PI*a/(2*h),u=2*Math.PI*o/(2*h),d=-Math.PI/2;d+=this.r.v;let f=3===this.data.d?-1:1;for(this.v._length=0,t=0;t<h;t+=1){e=n?a:o,s=n?l:p,i=n?c:u;let h=e*Math.cos(d),m=e*Math.sin(d),g=0===h&&0===m?0:m/Math.sqrt(h*h+m*m),y=0===h&&0===m?0:-h/Math.sqrt(h*h+m*m);h+=+this.p.v[0],m+=+this.p.v[1],this.v.setTripleAt(h,m,h-g*i*s*f,m-y*i*s*f,h+g*i*s*f,m+y*i*s*f,t,!0),n=!n,d+=r*f}}convertPolygonToPath(){let t,e=Math.floor(this.pt.v),s=2*Math.PI/e,i=this.or.v,h=this.os.v,r=2*Math.PI*i/(4*e),n=-Math.PI/2,a=3===this.data.d?-1:1;for(n+=this.r.v,this.v._length=0,t=0;t<e;t+=1){let e=i*Math.cos(n),o=i*Math.sin(n),l=0===e&&0===o?0:o/Math.sqrt(e*e+o*o),p=0===e&&0===o?0:-e/Math.sqrt(e*e+o*o);e+=+this.p.v[0],o+=+this.p.v[1],this.v.setTripleAt(e,o,e-l*r*h*a,o-p*r*h*a,e+l*r*h*a,o+p*r*h*a,t,!0),n+=s*a}this.paths.length=0,this.paths[0]=this.v}}const bt=.5519,Dt=bt;class Ct extends J{constructor(t,e){super(),this.v=X.newElement(),this.v.c=!0,this.localShapeCollection=W.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=t,this.comp=t.comp,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),this.p=St.getProp(t,e.p,1,0,this),this.s=St.getProp(t,e.s,1,0,this),this.r=St.getProp(t,e.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}reset(){this.paths=this.localShapeCollection}getValue(t){t!==this.frameId&&(this.frameId=t,this.iterateDynamicProperties(t),this._mdf&&this.convertRectToPath())}convertRectToPath(){let t=this.p.v[0],e=this.p.v[1],s=this.s.v[0]/2,i=this.s.v[1]/2,h=Math.min(s,i,this.r.v),r=h*(1-bt);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(t+s,e-i+h,t+s,e-i+h,t+s,e-i+r,0,!0),this.v.setTripleAt(t+s,e+i-h,t+s,e+i-r,t+s,e+i-h,1,!0),0!==h?(this.v.setTripleAt(t+s-h,e+i,t+s-h,e+i,t+s-r,e+i,2,!0),this.v.setTripleAt(t-s+h,e+i,t-s+r,e+i,t-s+h,e+i,3,!0),this.v.setTripleAt(t-s,e+i-h,t-s,e+i-h,t-s,e+i-r,4,!0),this.v.setTripleAt(t-s,e-i+h,t-s,e-i+r,t-s,e-i+h,5,!0),this.v.setTripleAt(t-s+h,e-i,t-s+h,e-i,t-s+r,e-i,6,!0),this.v.setTripleAt(t+s-h,e-i,t+s-r,e-i,t+s-h,e-i,7,!0)):(this.v.setTripleAt(t-s,e+i,t-s+r,e+i,t-s,e+i,2),this.v.setTripleAt(t-s,e-i,t-s,e-i+r,t-s,e-i,3))):(this.v.setTripleAt(t+s,e-i+h,t+s,e-i+r,t+s,e-i+h,0,!0),0!==h?(this.v.setTripleAt(t+s-h,e-i,t+s-h,e-i,t+s-r,e-i,1,!0),this.v.setTripleAt(t-s+h,e-i,t-s+r,e-i,t-s+h,e-i,2,!0),this.v.setTripleAt(t-s,e-i+h,t-s,e-i+h,t-s,e-i+r,3,!0),this.v.setTripleAt(t-s,e+i-h,t-s,e+i-r,t-s,e+i-h,4,!0),this.v.setTripleAt(t-s+h,e+i,t-s+h,e+i,t-s+r,e+i,5,!0),this.v.setTripleAt(t+s-h,e+i,t+s-r,e+i,t+s-h,e+i,6,!0),this.v.setTripleAt(t+s,e+i-h,t+s,e+i-h,t+s,e+i-r,7,!0)):(this.v.setTripleAt(t-s,e-i,t-s+r,e-i,t-s,e-i,1,!0),this.v.setTripleAt(t-s,e+i,t-s,e+i-r,t-s,e+i,2,!0),this.v.setTripleAt(t+s,e+i,t+s-r,e+i,t+s,e+i,3,!0)))}}var Lt={getShapeProp:function(t,e,s){let i;return 3===s||4===s?i=(3===s?e.pt:e.ks).k.length?new Pt(t,e,s):new Tt(t,e,s):5===s?i=new Ct(t,e):6===s?i=new Mt(t,e):7===s&&(i=new wt(t,e)),i.k&&t.addDynamicProperty(i),i},getConstructorFunction:function(){return Tt},getKeyframedConstructorFunction:function(){return Pt}};class At extends J{constructor(t,e,s){super(),this.frameId=-1,this.elem=t,this.session=s,this.masksProperties=e||[],this.initDynamicPropertyContainer(t),this.viewData=N(this.masksProperties.length);const i=this.masksProperties.length;let h=!1;for(let t=0;t<i;t++)"n"!==this.masksProperties[t].mode&&(h=!0),this.viewData[t]=Lt.getShapeProp(this,this.masksProperties[t],3),this.viewData[t].inv=this.masksProperties[t].inv;this.hasMasks=h}getValue(t){t!==this.frameId&&(this.iterateDynamicProperties(t),this.frameId=t)}}var Ot=function(){var t=Math.cos,e=Math.sin,s=Math.tan,i=Math.round;function h(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function r(s){if(0===s)return this;var i=t(s),h=e(s);return this._t(i,-h,0,0,h,i,0,0,0,0,1,0,0,0,0,1)}function n(s){if(0===s)return this;var i=t(s),h=e(s);return this._t(1,0,0,0,0,i,-h,0,0,h,i,0,0,0,0,1)}function a(s){if(0===s)return this;var i=t(s),h=e(s);return this._t(i,0,h,0,0,1,0,0,-h,0,i,0,0,0,0,1)}function o(s){if(0===s)return this;var i=t(s),h=e(s);return this._t(i,-h,0,0,h,i,0,0,0,0,1,0,0,0,0,1)}function l(t,e){return this._t(1,e,t,1,0,0)}function p(t,e){return this.shear(s(t),s(e))}function c(i,h){var r=t(h),n=e(h);return this._t(r,n,0,0,-n,r,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,s(i),1,0,0,0,0,1,0,0,0,0,1)._t(r,-n,0,0,n,r,0,0,0,0,1,0,0,0,0,1)}function u(t,e,s){return s||0===s||(s=1),1===t&&1===e&&1===s?this:this._t(t,0,0,0,0,e,0,0,0,0,s,0,0,0,0,1)}function d(t,e,s,i,h,r,n,a,o,l,p,c,u,d,f,m){return this.props[0]=t,this.props[1]=e,this.props[2]=s,this.props[3]=i,this.props[4]=h,this.props[5]=r,this.props[6]=n,this.props[7]=a,this.props[8]=o,this.props[9]=l,this.props[10]=p,this.props[11]=c,this.props[12]=u,this.props[13]=d,this.props[14]=f,this.props[15]=m,this}function f(t,e,s){return s=s||0,0!==t||0!==e||0!==s?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,s,1):this}function m(t,e,s,i,h,r,n,a,o,l,p,c,u,d,f,m){var g=this.props;if(1===t&&0===e&&0===s&&0===i&&0===h&&1===r&&0===n&&0===a&&0===o&&0===l&&1===p&&0===c)return g[12]=g[12]*t+g[15]*u,g[13]=g[13]*r+g[15]*d,g[14]=g[14]*p+g[15]*f,g[15]=g[15]*m,this._identityCalculated=!1,this;var y=g[0],v=g[1],_=g[2],k=g[3],S=g[4],x=g[5],T=g[6],P=g[7],M=g[8],w=g[9],b=g[10],D=g[11],C=g[12],L=g[13],A=g[14],O=g[15];return g[0]=y*t+v*h+_*o+k*u,g[1]=y*e+v*r+_*l+k*d,g[2]=y*s+v*n+_*p+k*f,g[3]=y*i+v*a+_*c+k*m,g[4]=S*t+x*h+T*o+P*u,g[5]=S*e+x*r+T*l+P*d,g[6]=S*s+x*n+T*p+P*f,g[7]=S*i+x*a+T*c+P*m,g[8]=M*t+w*h+b*o+D*u,g[9]=M*e+w*r+b*l+D*d,g[10]=M*s+w*n+b*p+D*f,g[11]=M*i+w*a+b*c+D*m,g[12]=C*t+L*h+A*o+O*u,g[13]=C*e+L*r+A*l+O*d,g[14]=C*s+L*n+A*p+O*f,g[15]=C*i+L*a+A*c+O*m,this._identityCalculated=!1,this}function g(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function y(t){for(var e=0;e<16;){if(t.props[e]!==this.props[e])return!1;e+=1}return!0}function v(t){var e;for(e=0;e<16;e+=1)t.props[e]=this.props[e]}function _(t){var e;for(e=0;e<16;e+=1)this.props[e]=t[e]}function k(t,e,s){return{x:t*this.props[0]+e*this.props[4]+s*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+s*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+s*this.props[10]+this.props[14]}}function S(t,e,s){return t*this.props[0]+e*this.props[4]+s*this.props[8]+this.props[12]}function x(t,e,s){return t*this.props[1]+e*this.props[5]+s*this.props[9]+this.props[13]}function T(t,e,s){return t*this.props[2]+e*this.props[6]+s*this.props[10]+this.props[14]}function P(t){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],s=this.props[5]/e,i=-this.props[1]/e,h=-this.props[4]/e,r=this.props[0]/e,n=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,a=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e;return[t[0]*s+t[1]*h+n,t[0]*i+t[1]*r+a,0]}function M(t){var e,s=t.length,i=[];for(e=0;e<s;e+=1)i[e]=P(t[e]);return i}function w(t,e,s){var i=V("float32",6);if(this.isIdentity())i[0]=t[0],i[1]=t[1],i[2]=e[0],i[3]=e[1],i[4]=s[0],i[5]=s[1];else{var h=this.props[0],r=this.props[1],n=this.props[4],a=this.props[5],o=this.props[12],l=this.props[13];i[0]=t[0]*h+t[1]*n+o,i[1]=t[0]*r+t[1]*a+l,i[2]=e[0]*h+e[1]*n+o,i[3]=e[0]*r+e[1]*a+l,i[4]=s[0]*h+s[1]*n+o,i[5]=s[0]*r+s[1]*a+l}return i}function b(t,e,s){return this.isIdentity()?[t,e,s]:[t*this.props[0]+e*this.props[4]+s*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+s*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+s*this.props[10]+this.props[14]]}function D(t,e){if(this.isIdentity())return t+","+e;var s=this.props;return Math.round(100*(t*s[0]+e*s[4]+s[12]))/100+","+Math.round(100*(t*s[1]+e*s[5]+s[13]))/100}function C(){for(var t=0,e=this.props,s="matrix3d(";t<16;)s+=i(1e4*e[t])/1e4,s+=15===t?")":",",t+=1;return s}function L(t){return t<1e-6&&t>0||t>-1e-6&&t<0?i(1e4*t)/1e4:t}function A(){var t=this.props;return"matrix("+L(t[0])+","+L(t[1])+","+L(t[4])+","+L(t[5])+","+L(t[12])+","+L(t[13])+")"}return function(){this.reset=h,this.rotate=r,this.rotateX=n,this.rotateY=a,this.rotateZ=o,this.skew=p,this.skewFromAxis=c,this.shear=l,this.scale=u,this.setTransform=d,this.translate=f,this.transform=m,this.applyToPoint=k,this.applyToX=S,this.applyToY=x,this.applyToZ=T,this.applyToPointArray=b,this.applyToTriplePoints=w,this.applyToPointStringified=D,this.toCSS=C,this.to2dCSS=A,this.clone=v,this.cloneFromProps=_,this.equals=y,this.inversePoints=M,this.inversePoint=P,this._t=this.transform,this.isIdentity=g,this._identity=!0,this._identityCalculated=!1,this.props=V("float32",16),this.reset()}}();class Ft{constructor(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}addTransformSequence(t){const e=t.length;let s="_";for(let i=0;i<e;i+=1)s+=t[i].transform.key+"_";let i=this.sequences[s];return i||(i={transforms:[].concat(t),finalTransform:new Ot,_mdf:!1},this.sequences[s]=i,this.sequenceList.push(i)),i}processSequence(t,e){let s=0,i=e;const h=t.transforms.length;for(;s<h&&!e;){if(t.transforms[s].transform.mProps._mdf){i=!0;break}s+=1}if(i){let e;for(t.finalTransform.reset(),s=h-1;s>=0;s-=1)e=t.transforms[s].transform.mProps.v.props,t.finalTransform.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}t._mdf=i}processSequences(t){const e=this.sequenceList.length;for(let s=0;s<e;s+=1)this.processSequence(this.sequenceList[s],t)}getNewKey(){return"_"+this.transform_key_count++}}class It{constructor(t,e){this.elem=t,this.pos=e}}class Et{constructor(t,e,s,i){this.styledShapes=[],this.tr=[0,0,0,0,0,0];let h=4;"rc"==e.ty?h=5:"el"==e.ty?h=6:"sr"==e.ty&&(h=7),this.sh=Lt.getShapeProp(t,e,h);const r=s.length;for(let t=0;t<r;t+=1)if(!s[t].closed){const e={transforms:i.addTransformSequence(s[t].transforms),trNodes:[]};this.styledShapes.push(e),s[t].elements.push(e)}}setAsAnimated(){this._isAnimated=!0}}const Vt={};function Nt(t){return Vt[t]}var qt={Type:{Null:"Null",Path:"Path",Shape:"Shape",Solid:"Solid",Sprite:"Sprite",Component:"Component",Container:"Container"},registerDisplayByType:function(t,e){Vt[t]=e}};class jt{constructor(t,e,s){this.elem=t,this.data=e,this.type=e.ty,this.preTransforms=s,this.transforms=[],this.elements=[],this.closed=!0===e.hd,this.displayType=qt.Type.Path;const i=Nt(this.displayType);this.display=new i(this,e),this.elem.innerDisplay?this.elem.innerDisplay.addChild(this.display):this.elem.display.addChild(this.display)}updateGrahpics(){this.display.updateLottieGrahpics(this)}}class Bt extends J{constructor(t,e,s){if(super(),this.elem=t,this.frameId=-1,this.propType="transform",this.data=e,this.v=new Ot,this.pre=new Ot,this.appliedTransformations=0,this.initDynamicPropertyContainer(s||t),e.p&&e.p.s?(this.px=St.getProp(t,e.p.x,0,0,this),this.py=St.getProp(t,e.p.y,0,0,this),e.p.z&&(this.pz=St.getProp(t,e.p.z,0,0,this))):this.p=St.getProp(t,e.p||{k:[0,0,0]},1,0,this),e.rx){if(this.rx=St.getProp(t,e.rx,0,nt,this),this.ry=St.getProp(t,e.ry,0,nt,this),this.rz=St.getProp(t,e.rz,0,nt,this),e.or.k[0].ti){let t,s=e.or.k.length;for(t=0;t<s;t+=1)e.or.k[t].to=e.or.k[t].ti=null}this.or=St.getProp(t,e.or,1,nt,this),this.or.sh=!0}else this.r=St.getProp(t,e.r||{k:0},0,nt,this);e.sk&&(this.sk=St.getProp(t,e.sk,0,nt,this),this.sa=St.getProp(t,e.sa,0,nt,this)),this.a=St.getProp(t,e.a||{k:[0,0,0]},1,0,this),this.s=St.getProp(t,e.s||{k:[100,100,100]},1,.01,this),e.o?this.o=St.getProp(t,e.o,0,.01,t):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(rt,!0)}getValue(t,e){if(t!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||e){if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){let t,e;const s=this.elem.globalData.frameRate;if(this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(t=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/s,0),e=this.p.getValueAtTime(this.p.keyframes[0].t/s,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(t=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/s,0),e=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/s,0)):(t=this.p.pv,e=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/s,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){t=[],e=[];let i=this.px,h=this.py;i._caching.lastFrame+i.offsetTime<=i.keyframes[0].t?(t[0]=i.getValueAtTime((i.keyframes[0].t+.01)/s,0),t[1]=h.getValueAtTime((h.keyframes[0].t+.01)/s,0),e[0]=i.getValueAtTime(i.keyframes[0].t/s,0),e[1]=h.getValueAtTime(h.keyframes[0].t/s,0)):i._caching.lastFrame+i.offsetTime>=i.keyframes[i.keyframes.length-1].t?(t[0]=i.getValueAtTime(i.keyframes[i.keyframes.length-1].t/s,0),t[1]=h.getValueAtTime(h.keyframes[h.keyframes.length-1].t/s,0),e[0]=i.getValueAtTime((i.keyframes[i.keyframes.length-1].t-.01)/s,0),e[1]=h.getValueAtTime((h.keyframes[h.keyframes.length-1].t-.01)/s,0)):(t=[i.pv,h.pv],e[0]=i.getValueAtTime((i._caching.lastFrame+i.offsetTime-.01)/s,i.offsetTime),e[1]=h.getValueAtTime((h._caching.lastFrame+h.offsetTime-.01)/s,h.offsetTime))}else t=e=at;this.v.rotate(-Math.atan2(t[1]-e[1],t[0]-e[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=t}}precalculateMatrix(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}if(this.r){if(this.r.effectsSequence.length)return;this.pre.rotate(-this.r.v),this.appliedTransformations=4}else this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}}applyToMatrix(t){let e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||e,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,this.sa.v),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}}function Rt(t,e,s){return new Bt(t,e,s)}class Xt extends J{initModifierProperties(){}addShapeToModifier(){}addShape(t){if(!this.closed){t.sh.container.addDynamicProperty(t.sh);const e={shape:t.sh,data:t,localShapeCollection:W.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}}init(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=rt,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)}processKeys(t){t!==this.frameId&&(this.frameId=t,this.iterateDynamicProperties(t))}}const Yt=.5519,Gt={};function Ut(t,e){Gt[t]||(Gt[t]=e)}Ut("tm",class extends Xt{initModifierProperties(t,e){this.s=St.getProp(t,e.s,0,.01,this),this.e=St.getProp(t,e.e,0,.01,this),this.o=St.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length}addShapeToModifier(t){t.pathsData=[]}calculateShapeEdges(t,e,s,i,h){let r=[];e<=1?r.push({s:t,e:e}):t>=1?r.push({s:t-1,e:e-1}):(r.push({s:t,e:1}),r.push({s:0,e:e-1}));let n,a,o=[],l=r.length;for(n=0;n<l;n+=1)if(a=r[n],a.e*h<i||a.s*h>i+s);else{let t,e;t=a.s*h<=i?0:(a.s*h-i)/s,e=a.e*h>=i+s?1:(a.e*h-i)/s,o.push([t,e])}return o.length||o.push([0,0]),o}releasePathsData(t){const e=t.length;for(let s=0;s<e;s+=1)K.release(t[s]);return t.length=0,t}processShapes(t){let e,s,i,h;if(this._mdf||t){let t=this.o.v%360/360;if(t<0&&(t+=1),e=(this.s.v>1?1:this.s.v<0?0:this.s.v)+t,s=(this.e.v>1?1:this.e.v<0?0:this.e.v)+t,e>s){let t=e;e=s,s=t}e=1e-4*Math.round(1e4*e),s=1e-4*Math.round(1e4*s),this.sValue=e,this.eValue=s}else e=this.sValue,s=this.eValue;let r,n,a,o,l,p=this.shapes.length,c=0;if(s===e)for(h=0;h<p;h+=1)this.shapes[h].localShapeCollection.releaseShapes(),this.shapes[h].shape._mdf=!0,this.shapes[h].shape.paths=this.shapes[h].localShapeCollection,this._mdf&&(this.shapes[h].pathsData.length=0);else if(1===s&&0===e||0===s&&1===e){if(this._mdf)for(h=0;h<p;h+=1)this.shapes[h].pathsData.length=0,this.shapes[h].shape._mdf=!0}else{let u,d,f=[];for(h=0;h<p;h+=1)if(u=this.shapes[h],u.shape._mdf||this._mdf||t||2===this.m){if(i=u.shape.paths,n=i._length,l=0,!u.shape._mdf&&u.pathsData.length)l=u.totalShapeLength;else{for(a=this.releasePathsData(u.pathsData),r=0;r<n;r+=1)o=ht.getSegmentsLength(i.shapes[r]),a.push(o),l+=o.totalLength;u.totalShapeLength=l,u.pathsData=a}c+=l,u.shape._mdf=!0}else u.shape.paths=u.localShapeCollection;let m,g=e,y=s,v=0;for(h=p-1;h>=0;h-=1)if(u=this.shapes[h],u.shape._mdf){for(d=u.localShapeCollection,d.releaseShapes(),2===this.m&&p>1?(m=this.calculateShapeEdges(e,s,u.totalShapeLength,v,c),v+=u.totalShapeLength):m=[[g,y]],n=m.length,r=0;r<n;r+=1){g=m[r][0],y=m[r][1],f.length=0,y<=1?f.push({s:u.totalShapeLength*g,e:u.totalShapeLength*y}):g>=1?f.push({s:u.totalShapeLength*(g-1),e:u.totalShapeLength*(y-1)}):(f.push({s:u.totalShapeLength*g,e:u.totalShapeLength}),f.push({s:0,e:u.totalShapeLength*(y-1)}));let t=this.addShapes(u,f[0]);if(f[0].s!==f[0].e){if(f.length>1)if(u.shape.paths.shapes[u.shape.paths._length-1].c){let e=t.pop();this.addPaths(t,d),t=this.addShapes(u,f[1],e)}else this.addPaths(t,d),t=this.addShapes(u,f[1]);this.addPaths(t,d)}}u.shape.paths=d}}}addPaths(t,e){const s=t.length;for(let i=0;i<s;i+=1)e.addShape(t[i])}addSegment(t,e,s,i,h,r,n){h.setXYAt(e[0],e[1],"o",r),h.setXYAt(s[0],s[1],"i",r+1),n&&h.setXYAt(t[0],t[1],"v",r),h.setXYAt(i[0],i[1],"v",r+1)}addSegmentFromArray(t,e,s,i){e.setXYAt(t[1],t[5],"o",s),e.setXYAt(t[2],t[6],"i",s+1),i&&e.setXYAt(t[0],t[4],"v",s),e.setXYAt(t[3],t[7],"v",s+1)}addShapes(t,e,s){let i,h,r,n,a,o,l,p,c=t.pathsData,u=t.shape.paths.shapes,d=t.shape.paths._length,f=0,m=[],g=!0;for(s?(a=s._length,p=s._length):(s=X.newElement(),a=0,p=0),m.push(s),i=0;i<d;i+=1){for(o=c[i].lengths,s.c=u[i].c,r=u[i].c?o.length:o.length+1,h=1;h<r;h+=1)if(n=o[h-1],f+n.addedLength<e.s)f+=n.addedLength,s.c=!1;else{if(f>e.e){s.c=!1;break}e.s<=f&&e.e>=f+n.addedLength?(this.addSegment(u[i].v[h-1],u[i].o[h-1],u[i].i[h],u[i].v[h],s,a,g),g=!1):(l=ht.getNewSegment(u[i].v[h-1],u[i].v[h],u[i].o[h-1],u[i].i[h],(e.s-f)/n.addedLength,(e.e-f)/n.addedLength,o[h-1]),this.addSegmentFromArray(l,s,a,g),g=!1,s.c=!1),f+=n.addedLength,a+=1}if(u[i].c&&o.length){if(n=o[h-1],f<=e.e){let t=o[h-1].addedLength;e.s<=f&&e.e>=f+t?(this.addSegment(u[i].v[h-1],u[i].o[h-1],u[i].i[0],u[i].v[0],s,a,g),g=!1):(l=ht.getNewSegment(u[i].v[h-1],u[i].v[0],u[i].o[h-1],u[i].i[0],(e.s-f)/t,(e.e-f)/t,o[h-1]),this.addSegmentFromArray(l,s,a,g),g=!1,s.c=!1)}else s.c=!1;f+=n.addedLength,a+=1}if(s._length&&(s.setXYAt(s.v[p][0],s.v[p][1],"i",p),s.setXYAt(s.v[s._length-1][0],s.v[s._length-1][1],"o",s._length-1)),f>e.e)break;i<d-1&&(s=X.newElement(),g=!0,m.push(s),a=0)}return m}}),Ut("rd",class extends Xt{initModifierProperties(t,e){this.getValue=this.processKeys,this.rd=St.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length}processPath(t,e){const s=X.newElement();let i;s.c=t.c;let h,r,n,a,o,l,p,c,u,d,f,m,g=t._length,y=0;for(i=0;i<g;i+=1)h=t.v[i],n=t.o[i],r=t.i[i],h[0]===n[0]&&h[1]===n[1]&&h[0]===r[0]&&h[1]===r[1]?0!==i&&i!==g-1||t.c?(a=0===i?t.v[g-1]:t.v[i-1],o=Math.sqrt(Math.pow(h[0]-a[0],2)+Math.pow(h[1]-a[1],2)),l=o?Math.min(o/2,e)/o:0,p=f=h[0]+(a[0]-h[0])*l,c=m=h[1]-(h[1]-a[1])*l,u=p-(p-h[0])*Yt,d=c-(c-h[1])*Yt,s.setTripleAt(p,c,u,d,f,m,y),y+=1,a=i===g-1?t.v[0]:t.v[i+1],o=Math.sqrt(Math.pow(h[0]-a[0],2)+Math.pow(h[1]-a[1],2)),l=o?Math.min(o/2,e)/o:0,p=u=h[0]+(a[0]-h[0])*l,c=d=h[1]+(a[1]-h[1])*l,f=p-(p-h[0])*Yt,m=c-(c-h[1])*Yt,s.setTripleAt(p,c,u,d,f,m,y),y+=1):(s.setTripleAt(h[0],h[1],n[0],n[1],r[0],r[1],y),y+=1):(s.setTripleAt(t.v[i][0],t.v[i][1],t.o[i][0],t.o[i][1],t.i[i][0],t.i[i][1],y),y+=1);return s}processShapes(t){let e,s,i,h,r=this.shapes.length,n=this.rd.v;if(0!==n){let a,o;for(s=0;s<r;s+=1){if(a=this.shapes[s],o=a.localShapeCollection,a.shape._mdf||this._mdf||t)for(o.releaseShapes(),a.shape._mdf=!0,e=a.shape.paths.shapes,h=a.shape.paths._length,i=0;i<h;i+=1)o.addShape(this.processPath(e[i],n));a.shape.paths=a.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)}}),Ut("rp",class extends Xt{initModifierProperties(t,e){this.getValue=this.processKeys,this.c=St.getProp(t,e.c,0,null,this),this.o=St.getProp(t,e.o,0,null,this),this.tr=Rt(t,e.tr,this),this.so=St.getProp(t,e.tr.so,0,.01,this),this.eo=St.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Ot,this.rMatrix=new Ot,this.sMatrix=new Ot,this.tMatrix=new Ot,this.matrix=new Ot}applyTransforms(t,e,s,i,h,r){let n=r?-1:1,a=i.s.v[0]+(1-i.s.v[0])*(1-h),o=i.s.v[1]+(1-i.s.v[1])*(1-h);t.translate(i.p.v[0]*n*h,i.p.v[1]*n*h,i.p.v[2]),e.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),e.rotate(-i.r.v*n*h),e.translate(i.a.v[0],i.a.v[1],i.a.v[2]),s.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),s.scale(r?1/a:a,r?1/o:o),s.translate(i.a.v[0],i.a.v[1],i.a.v[2])}init(t,e,s,i){for(this.elem=t,this.arr=e,this.pos=s,this.elemsData=i,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[s]);s>0;)s-=1,this._elements.unshift(e[s]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)}resetElements(t){const e=t.length;for(let s=0;s<e;s+=1)t[s]._processed=!1,"gr"===t[s].ty&&this.resetElements(t[s].it)}cloneElements(t){let e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e}changeGroupRender(t,e){const s=t.length;for(let i=0;i<s;i+=1)t[i]._render=e,"gr"===t[i].ty&&this.changeGroupRender(t[i].it,e)}processShapes(t){if(this._mdf||t){let t=Math.ceil(this.c.v);if(this._groups.length<t){for(;this._groups.length<t;){let t={it:this.cloneElements(this._elements),ty:"gr"};t.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,t),this._groups.splice(0,0,t),this._currentCopies+=1}this.elem.reloadShapes()}let e,s,i=0;for(e=0;e<=this._groups.length-1;e+=1)s=i<t,this._groups[e]._render=s,this.changeGroupRender(this._groups[e].it,s),i+=1;this._currentCopies=t;let h=this.o.v,r=h%1,n=h>0?Math.floor(h):Math.ceil(h),a=this.pMatrix.props,o=this.rMatrix.props,l=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();let p=0;if(h>0){for(;p<n;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),p+=1;r&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,r,!1),p+=r)}else if(h<0){for(;p>n;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),p-=1;r&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-r,!0),p-=r)}e=1===this.data.m?0:this._currentCopies-1;const c=1===this.data.m?1:-1;for(i=this._currentCopies;i;){const t=this.elemsData[e].it,s=t[t.length-1].transform.mProps.v.props,h=s.length;if(t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=this.so.v+(this.eo.v-this.so.v)*(e/(this._currentCopies-1)),0!==p){(0!==e&&1===c||e!==this._currentCopies-1&&-1===c)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15]),this.matrix.transform(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15]),this.matrix.transform(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]);for(let t=0;t<h;t+=1)s[t]=this.matrix.props[t];this.matrix.reset()}else{this.matrix.reset();for(let t=0;t<h;t+=1)s[t]=this.matrix.props[t]}p+=1,i-=1,e+=c}}else{let t=this._currentCopies,e=0;const s=1;for(;t;){const i=this.elemsData[e].it;i[i.length-1].transform.mProps._mdf=!1,i[i.length-1].transform.op._mdf=!1,t-=1,e+=s}}}addShape(){}}),Ut("ms",class extends Xt{initModifierProperties(t,e){this.getValue=this.processKeys,this.data=e,this.positions=[]}processKeys(t,e){(t!==this.frameId||e)&&(this._mdf=!0)}addShapeToModifier(){this.positions.push([])}processPath(t,e,s){let i,h,r,n,a=t.v.length,o=[],l=[],p=[];for(i=0;i<a;i+=1){s.v[i]||(s.v[i]=[t.v[i][0],t.v[i][1]],s.o[i]=[t.o[i][0],t.o[i][1]],s.i[i]=[t.i[i][0],t.i[i][1]],s.distV[i]=0,s.distO[i]=0,s.distI[i]=0),h=Math.atan2(t.v[i][1]-e[1],t.v[i][0]-e[0]),r=e[0]-s.v[i][0],n=e[1]-s.v[i][1];let a=Math.sqrt(r*r+n*n);s.distV[i]+=(a-s.distV[i])*this.data.dc,s.v[i][0]=Math.cos(h)*Math.max(0,this.data.maxDist-s.distV[i])/2+t.v[i][0],s.v[i][1]=Math.sin(h)*Math.max(0,this.data.maxDist-s.distV[i])/2+t.v[i][1],h=Math.atan2(t.o[i][1]-e[1],t.o[i][0]-e[0]),r=e[0]-s.o[i][0],n=e[1]-s.o[i][1],a=Math.sqrt(r*r+n*n),s.distO[i]+=(a-s.distO[i])*this.data.dc,s.o[i][0]=Math.cos(h)*Math.max(0,this.data.maxDist-s.distO[i])/2+t.o[i][0],s.o[i][1]=Math.sin(h)*Math.max(0,this.data.maxDist-s.distO[i])/2+t.o[i][1],h=Math.atan2(t.i[i][1]-e[1],t.i[i][0]-e[0]),r=e[0]-s.i[i][0],n=e[1]-s.i[i][1],a=Math.sqrt(r*r+n*n),s.distI[i]+=(a-s.distI[i])*this.data.dc,s.i[i][0]=Math.cos(h)*Math.max(0,this.data.maxDist-s.distI[i])/2+t.i[i][0],s.i[i][1]=Math.sin(h)*Math.max(0,this.data.maxDist-s.distI[i])/2+t.i[i][1],o.push(s.v[i]),l.push(s.o[i]),p.push(s.i[i])}return{v:o,o:l,i:p,c:t.c}}processShapes(){let t,e,s,i,h=this.elem.globalData.mouseX,r=this.elem.globalData.mouseY,n=this.shapes.length;if(h){let a,o=this.elem.globalToLocal([h,r,0]),l=[];for(e=0;e<n;e+=1)if(a=this.shapes[e],a.shape._mdf||this._mdf){for(a.shape._mdf=!0,t=a.shape.paths,i=t.length,s=0;s<i;s+=1)this.positions[e][s]||(this.positions[e][s]={v:[],o:[],i:[],distV:[],distO:[],distI:[]}),l.push(this.processPath(t[s],o,this.positions[e][s]));a.shape.paths=l,a.last=l}else a.shape.paths=a.last}}});var zt={getModifier:function(t,e,s){return new Gt[t](e,s)}};class Wt extends J{constructor(t,e,s){let i;super(),this.elem=t,this.frameId=-1,this.dataProps=N(e.length),this.k=!1,this.dashArray=V("float32",e.length?e.length-1:0),this.dashoffset=V("float32",1),this.initDynamicPropertyContainer(s);let h,r=e.length||0;for(i=0;i<r;i+=1)h=St.getProp(t,e[i].v,0,0,this),this.k=h.k||this.k,this.dataProps[i]={n:e[i].n,p:h};this.k||this.getValue(!0),this._isAnimated=this.k}getValue(t,e){if((t!==this.frameId||e)&&(this.frameId=t,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){let t=0,e=this.dataProps.length;for(t=0;t<e;t+=1)"o"!=this.dataProps[t].n?this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}}}class Jt extends J{constructor(t,e,s){super(),this.data=e,this.c=V("uint8c",4*e.p);let i=e.k.k[0].s?e.k.k[0].s.length-4*e.p:e.k.k.length-4*e.p;this.o=V("float32",i),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=i,this.initDynamicPropertyContainer(s),this.prop=St.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}comparePoints(t,e){let s,i=0,h=this.o.length/2;for(;i<h;){if(s=Math.abs(t[4*i]-t[4*e+2*i]),s>.01)return!1;i+=1}return!0}checkCollapsable(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s){let t=0,e=this.data.k.k.length;for(;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0}getValue(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){let e,s,i,h=4*this.data.p;for(e=0;e<h;e+=1)s=e%4==0?100:255,i=Math.round(this.prop.v[e]*s),this.c[e]!==i&&(this.c[e]=i,this._cmdf=!t);if(this.o.length)for(h=this.prop.v.length,e=4*this.data.p;e<h;e+=1)s=e%2==0?100:1,i=e%2==0?Math.round(100*this.prop.v[e]):this.prop.v[e],this.o[e-4*this.data.p]!==i&&(this.o[e-4*this.data.p]=i,this._omdf=!t);this._mdf=!t}}}class Ht extends J{constructor(t,e,s){super(),this.frameId=-1,this.keyframesManager=t,this.elem=t.elem,this.session=s,this.shapes=[],this.shapesData=e,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new Ft,this.initDynamicPropertyContainer(t),this.lcEnum={1:"butt",2:"round",3:"square"},this.ljEnum={1:"miter",2:"round",3:"bevel"},this._isFirstFrame=!0,this.transformHelper={opacity:1,_opMdf:!1},this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),this._isAnimated||(this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.updateModifiers(this.frameId),this.transformsManager.processSequences(this._isFirstFrame),this.updateShape(this.transformHelper,this.shapesData,this.itemsData),this.updateGrahpics())}createStyleElement(t,e){const s=new jt(this.elem,t,this.transformsManager.addTransformSequence(e)),i={};if("fl"==t.ty||"st"==t.ty?(i.c=St.getProp(this,t.c,1,255,this),i.c.k||(s.co=i.c.v)):"gf"!==t.ty&&"gs"!==t.ty||(i.s=St.getProp(this,t.s,1,null,this),i.e=St.getProp(this,t.e,1,null,this),i.h=St.getProp(this,t.h||{k:0},0,.01,this),i.a=St.getProp(this,t.a||{k:0},0,nt,this),i.g=new Jt(this,t.g,this)),i.o=St.getProp(this,t.o,0,.01,this),"st"==t.ty||"gs"==t.ty){if(s.lc=this.lcEnum[t.lc]||"round",s.lj=this.ljEnum[t.lj]||"round",1==t.lj&&(s.ml=t.ml),i.w=St.getProp(this,t.w,0,null,this),i.w.k||(s.wi=i.w.v),t.d){let e=new Wt(this,t.d,"canvas",this);i.d=e,i.d.k||(s.da=i.d.dashArray,s.do=i.d.dashoffset[0])}}else s.r=2===t.r?"evenodd":"nonzero";return this.stylesList.push(s),i.style=s,i}addShapeToModifiers(t){let e,s=this.shapeModifiers.length;for(e=0;e<s;e+=1)this.shapeModifiers[e].addShape(t)}isShapeInAnimatedModifiers(t){let e=this.shapeModifiers.length;for(;0<e;)if(this.shapeModifiers[0].isAnimatedWithShape(t))return!0;return!1}updateModifiers(t){if(!this.shapeModifiers.length)return;let e,s=this.shapes.length;for(e=0;e<s;e+=1)this.shapes[e].sh.reset();for(s=this.shapeModifiers.length,e=s-1;e>=0;e-=1)this.shapeModifiers[e].processShapes(t,this._isFirstFrame)}searchProcessedElement(t){let e=this.processedElements,s=0,i=e.length;for(;s<i;){if(e[s].elem===t)return e[s].pos;s+=1}return 0}addProcessedElement(t,e){let s=this.processedElements,i=s.length;for(;i;)if(i-=1,s[i].elem===t)return void(s[i].pos=e);s.push(new It(t,e))}createGroupElement(){return{it:[],prevViewData:[]}}createTransformElement(t){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:St.getProp(this,t.o,0,.01,this),mProps:Rt(this,t,this)}}}createShapeElement(t){const e=new Et(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e}reloadShapes(){let t;this._isFirstFrame=!0;let e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.updateModifiers(),this.transformsManager.processSequences(this._isFirstFrame)}addTransformToStyleList(t){const e=this.stylesList.length;for(let s=0;s<e;s+=1)this.stylesList[s].closed||this.stylesList[s].transforms.push(t)}removeTransformFromStyleList(){const t=this.stylesList.length;for(let e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()}closeStyles(t){const e=t.length;for(let s=0;s<e;s+=1)t[s].closed=!0}searchShapes(t,e,s,i,h){let r,n,a,o,l,p,c=t.length-1,u=[],d=[],f=[].concat(h);for(r=c;r>=0;r-=1){if(o=this.searchProcessedElement(t[r]),o?e[r]=s[o-1]:t[r]._shouldRender=i,"fl"==t[r].ty||"st"==t[r].ty||"gf"==t[r].ty||"gs"==t[r].ty)o?e[r].style.closed=!1:e[r]=this.createStyleElement(t[r],f),u.push(e[r].style);else if("gr"==t[r].ty){if(o)for(a=e[r].it.length,n=0;n<a;n+=1)e[r].prevViewData[n]=e[r].it[n];else e[r]=this.createGroupElement(t[r]);this.searchShapes(t[r].it,e[r].it,e[r].prevViewData,i,f)}else"tr"==t[r].ty?(o||(p=this.createTransformElement(t[r]),e[r]=p),f.push(e[r]),this.addTransformToStyleList(e[r])):"sh"==t[r].ty||"rc"==t[r].ty||"el"==t[r].ty||"sr"==t[r].ty?o||(e[r]=this.createShapeElement(t[r])):"tm"==t[r].ty||"rd"==t[r].ty?(o?(l=e[r],l.closed=!1):(l=zt.getModifier(t[r].ty),l.init(this,t[r]),e[r]=l,this.shapeModifiers.push(l)),d.push(l)):"rp"==t[r].ty&&(o?(l=e[r],l.closed=!0):(l=zt.getModifier(t[r].ty),e[r]=l,l.init(this,t,r,e),this.shapeModifiers.push(l),i=!1),d.push(l));this.addProcessedElement(t[r],r+1)}for(this.removeTransformFromStyleList(),this.closeStyles(u),c=d.length,r=0;r<c;r+=1)d[r].closed=!0}updateShapeTransform(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)}updateStyledShape(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){let s,i,h,r=t.trNodes,n=e.paths,a=n._length;r.length=0;let o=t.transforms.finalTransform;for(h=0;h<a;h+=1){let t=n.shapes[h];if(t&&t.v){for(i=t._length,s=1;s<i;s+=1)1===s&&r.push({t:"m",p:o.applyToPointArray(t.v[0][0],t.v[0][1],0)}),r.push({t:"c",pts:o.applyToTriplePoints(t.o[s-1],t.i[s],t.v[s])});1===i&&r.push({t:"m",p:o.applyToPointArray(t.v[0][0],t.v[0][1],0)}),t.c&&i&&(r.push({t:"c",pts:o.applyToTriplePoints(t.o[s-1],t.i[0],t.v[0])}),r.push({t:"z"}))}}t.trNodes=r}}updatePath(t,e){if(!0!==t.hd&&t._shouldRender){let t,s=e.styledShapes.length;for(t=0;t<s;t+=1)this.updateStyledShape(e.styledShapes[t],e.sh)}}updateFill(t,e,s){const i=e.style;(e.c._mdf||this._isFirstFrame)&&(i.co=e.c.v),(e.o._mdf||s._opMdf||this._isFirstFrame)&&(i.coOp=e.o.v*s.opacity)}updateStroke(t,e,s){let i=e.style,h=e.d;h&&(h._mdf||this._isFirstFrame)&&(i.da=h.dashArray,i.do=h.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(i.co=e.c.v),(e.o._mdf||s._opMdf||this._isFirstFrame)&&(i.coOp=e.o.v*s.opacity),(e.w._mdf||this._isFirstFrame)&&(i.wi=e.w.v)}updateGradientFill(t,e,s){let i=e.style;i.grd=e.g.c,i.coOp=e.o.v*s.opacity}updateShape(t,e,s){let i=t;for(let h=e.length-1;h>=0;h-=1)"tr"==e[h].ty?(i=s[h].transform,this.updateShapeTransform(t,i)):"sh"==e[h].ty||"el"==e[h].ty||"rc"==e[h].ty||"sr"==e[h].ty?this.updatePath(e[h],s[h]):"fl"==e[h].ty?this.updateFill(e[h],s[h],i):"st"==e[h].ty?this.updateStroke(e[h],s[h],i):"gf"==e[h].ty||"gs"==e[h].ty?this.updateGradientFill(e[h],s[h],i):"gr"==e[h].ty&&this.updateShape(i,e[h].it,s[h].it)}updateGrahpics(){const t=this.stylesList.length;for(let e=0;e<t;e+=1)this.stylesList[e].updateGrahpics()}getValue(t){t!==this.frameId&&(this.iterateDynamicProperties(t),this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.updateModifiers(t),this.transformsManager.processSequences(this._isFirstFrame),this.updateShape(this.transformHelper,this.shapesData,this.itemsData),this.updateGrahpics(),this.frameId=t)}}class Kt extends Bt{constructor(t,e,s){super(t,e),this.frameId=-1,this.hs=e,this.session=s}getValue(t){t!==this.frameId&&(this.iterateDynamicProperties(t),this.frameId=t)}get x(){return this.p?this.p.v[0]:this.px.v}get y(){return this.p?this.p.v[1]:this.py.v}get anchorX(){return this.a.v[0]}get anchorY(){return this.a.v[1]}get scaleX(){return this.s.v[0]}get scaleY(){return this.s.v[1]}get rotation(){return this.r&&this.r.v||0}get alpha(){return this.o.v}}class Zt{constructor(t){this.elem=t,this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1,this.transform=null,this.masks=null,this.shapes=null,this._hasOutTypeExpression=!1,this.needUpdateOverlap=!1,this.isOverlapMode=!1,this.visible=!0,this._isFirstFrame=!0}initFrame(t,e){this.layer=t;const{local:s,global:i}=e;this.session=e,this.isOverlapLayer=this.layer.op>=s.op-s.st,this.isOverlapMode=i.overlapMode,this.parseLayer(t,e)}outTypeExpressionMode(){this._hasOutTypeExpression=!0,this.isOverlapLayer&&(this.needUpdateOverlap=!0)}prepareProperties(t,e){let s,i=this.dynamicProperties.length;for(s=0;s<i;s+=1)(e||this.needUpdateOverlap||this.elem._isParent&&"transform"===this.dynamicProperties[s].propType)&&(this.dynamicProperties[s].getValue(t),this.dynamicProperties[s]._mdf&&(this._mdf=!0))}addDynamicProperty(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)}parseLayer({ks:t,hasMask:e,masksProperties:s,shapes:i,tm:h},r){if(t&&(this.transform=new Kt(this,t,r)),e&&(this.masks=new At(this,s,r)),i&&(this.shapes=new Ht(this,i,r)),h){const{frameRate:t}=r.global;this.tm=St.getProp(this,h,0,t,this)}}updateFrame(t){this._mdf=!1;const e=c.inRange(t,this.layer.ip,this.layer.op);this.isOverlapMode&&this.isOverlapLayer?this.visible=t>=this.layer.ip:this.visible=e,this.prepareProperties(t,e)}updateDisplay(){const t=this.elem.display;this.elem._isRoot||(this.visible?t.show():t.hide(),(this._mdf||this.transform._mdf||this._isFirstFrame)&&t.updateLottieTransform(this.transform),this.masks&&(this.masks._mdf||this._isFirstFrame)&&t.updateLottieMasks(this.masks)),this._isFirstFrame=!1}}class $t{constructor(t){this.data=t,void 0===this.data.sr&&(this.data.sr=1),this.offsetTime=t.st||0,this.fullname=t.nm||"",this.idname=t.ln||"",this.classnames=t.cl?t.cl.split(" "):[],this.bodymovin=new Zt(this),this.displayType="",this.display=null,this.hierarchy=null,this.lottieTreeParent=null}initBodymovin(t,e){this.bodymovin.initFrame(t,e),this.display&&this.display.onSetupLottie&&this.display.onSetupLottie()}hasValidMasks(){return!(!this.bodymovin.masks||!this.bodymovin.masks.hasMasks)}setHierarchy(t){this.hierarchy=t,this.display.setHierarchy(t.display)}initDisplayInstance(t,e){return new(Nt(t))(this,e)}updateFrame(t){this.bodymovin.updateFrame(t),this.bodymovin.updateDisplay()}}class Qt extends $t{constructor(t,e){super(t);const{global:s}=e;this.session=e;const i={layer:t,session:e};if(s.maskComp){i.maskComp=s.maskComp;const{w:e,h:h}=t;i.viewport={w:e,h:h}}this.config=i,this.childNodes=[],this.displayType=qt.Type.Component,this.innerDisplay=null,this.display=this.initDisplayInstance(this.displayType,i),this.initBodymovin(t,e)}updateFrame(t){if(this.bodymovin.updateFrame(t),this.bodymovin.updateDisplay(),t-=this.offsetTime,this.bodymovin.tm){let e=this.bodymovin.tm.v;e===this.data.op&&(e=this.data.op-1),t=e}else t/=this.data.sr;for(let e=0;e<this.childNodes.length;e++)this.childNodes[e].updateFrame(t)}addChild(t){t.lottieTreeParent=this,this.childNodes.push(t),this.innerDisplay?this.innerDisplay.addChild(t.display):this.display.addChild(t.display)}}class te extends $t{constructor(t,e){super(t);const s={layer:t,session:e,rect:{x:0,y:0,width:t.sw,height:t.sh},color:t.sc};this.config=s,this.session=e,this.displayType=qt.Type.Solid,this.display=this.initDisplayInstance(this.displayType,s),this.initBodymovin(t,e)}}class ee extends $t{constructor(t,e){super(t);const{global:{textureLoader:s,assets:i}}=e,h=c.getAssets(t.refId,i),r={layer:t,session:e,texture:s.getTextureById(h.id),asset:h};this.config=r,this.session=e,this.displayType=qt.Type.Sprite,this.display=this.initDisplayInstance(this.displayType,r),this.initBodymovin(t,e)}}class se extends $t{constructor(t,e){super(t);const s={layer:t,session:e};this.config=s,this.session=e,this.displayType=qt.Type.Shape,this.display=this.initDisplayInstance(this.displayType,s),this.initBodymovin(t,e)}}class ie extends $t{constructor(t,e){super(t);const s={layer:t,session:e};this.config=s,this.session=e,this.displayType=qt.Type.Null,this.display=this.initDisplayInstance(this.displayType,s),this.initBodymovin(t,e)}}class he extends u{constructor(t){super(),this.living=!0,this.infinite=t.infinite||!1,this.repeats=t.repeats||0,this.alternate=t.alternate||!1,this.wait=t.wait||0,this.delay=t.delay||0,this.overlapMode=t.overlapMode||!1,this.timeScale=c.isNumber(t.timeScale)?t.timeScale:1,this.frameNum=0,this.isPaused=!0,this.direction=1,this._lastFrame=-1/0,this._repeatsCut=this.repeats,this._delayCut=this.delay,this._waitCut=this.wait,this.segments=t.segments||{},this._segmentName=t.initSegment||"",this._prefix=t.prefix||"",this._autoLoad=!c.isBoolean(t.autoLoad)||t.autoLoad,this._autoStart=!c.isBoolean(t.autoStart)||t.autoStart,this._justDisplayOnImagesLoaded=!c.isBoolean(t.justDisplayOnImagesLoaded)||t.justDisplayOnImagesLoaded,this._maskComp=t.maskComp||!1,this.textureLoader=null,this.jsonLoader=null,this.root=null,this.parent=null;const e=Nt(qt.Type.Container);if(this.group=new e,this.display=null,this.isDisplayLoaded=!1,this.isImagesLoaded=!1,this._copyJSON=t.copyJSON||!1,t.keyframes)!this._prefix&&t.keyframes.prefix&&(this._prefix=t.keyframes.prefix),this._setupDate(t.keyframes);else if(t.path){let e="";e=-1!==t.path.lastIndexOf("\\")?t.path.substr(0,t.path.lastIndexOf("\\")+1):t.path.substr(0,t.path.lastIndexOf("/")+1),!this._prefix&&e&&(this._prefix=e),this.jsonLoader=function(t){const e=d[f.Ajax];return e||console.warn("must register an ajax loader, before you parse an animation from path"),e(t)}(t.path),this.jsonLoader.once("success",(t=>{this._setupDate(t)})),this.jsonLoader.once("error",(t=>{this.emit("error",t)}))}}_setupDate(t){this._sourceData=t,this._copyJSON&&(t=c.copyJSON(t)),M.completeData(t),this.keyframes=t;const{w:e,h:s,st:i=0,fr:h,ip:r,op:n,assets:a}=t;this.frameRate=h,this.frameMult=h/1e3,this._defaultSegment=[r,n];const o=this._segmentName&&this.segments[this._segmentName]||this._defaultSegment;this.beginFrame=o[0],this.endFrame=o[1],this._timePerFrame=1e3/h,this.duration=Math.floor(this.endFrame-this.beginFrame);let l=null;const p=a.filter((t=>t.u||t.p));p.length>0?(this.textureLoader=l=function(t,e){const s=d[f.Texture];return s||console.warn("must register an image loader, before you parse an animation some has image assets"),s(t,e)}(p,{prefix:this._prefix,autoLoad:this._autoLoad}),l.loaded?(this.isImagesLoaded=!0,this.isPaused=!this._autoStart,this.emit("ImageReady")):(l.once("complete",(()=>{this.isImagesLoaded=!0,this.emit("ImageReady")})),null!==this._pausedNeedSet&&(this._pausedNeedSet=!0,l.once("complete",(()=>{this._pausedNeedSet&&(this._pausedNeedSet=!1,this.isPaused=!this._autoStart)}))))):(this.isImagesLoaded=!0,this.isPaused=!this._autoStart);const u={global:{assets:a,textureLoader:l,frameRate:h,maskComp:this._maskComp,overlapMode:this.overlapMode},local:{w:e,h:s,ip:r,op:n,st:i}};this._buildElements(u),null!==this.textureLoader&&this._justDisplayOnImagesLoaded&&!this.textureLoader.loaded&&null!==this._justDisplayNeedSet&&(this.group.visible=!1,this._justDisplayNeedSet=!0,this.textureLoader.once("complete",(()=>{this._justDisplayNeedSet&&(this._justDisplayNeedSet=!1,this.group.visible=!0)}))),this.isDisplayLoaded=!0,this.update(0,!0)}_buildElements(t){this.root=this._extraCompositions(this.keyframes,t,!0),this.display=this.root.display,this.group.addChild(this.display),this.emit("DOMLoaded").emit("DisplayReady"),null===this.textureLoader||this.textureLoader.loaded?this.emit("success"):this.textureLoader.once("complete",(()=>this.emit("success")))}_extraCompositions(t,{global:e,local:s},i=!1){const{w:h,h:r,ip:n,op:a,st:o=0}=t,l=new Qt(t,{global:e,local:s});l._isRoot=i;const p=t.layers||c.getAssets(t.refId,e.assets).layers,u={global:e,local:{w:h,h:r,ip:n,op:a,st:o}},d=this._createElements(p,u);for(let t=p.length-1;t>=0;t--){const e=p[t],s=d[e.ind];if(s){if(!c.isUndefined(e.parent)){const t=d[e.parent];t._isParent=!0,s.setHierarchy(t)}l.addChild(s)}}return l}_createElements(t,e){const s={};for(let i=t.length-1;i>=0;i--){const h=t[i];let r=null;if(void 0===h.td){switch(h.ty){case 0:r=this._extraCompositions(h,e);break;case 1:r=new te(h,e);break;case 2:r=new ee(h,e);break;case 3:r=new ie(h,e);break;case 4:r=new se(h,e);break;default:continue}r&&(void 0===h.ind&&(h.ind=i),s[h.ind]=r,r.name=h.nm||null)}}return s}getDisplayByQuerySelector(t){const e=this.querySelector(t);return e&&e.display?e.display:(console.warn("can not find display which query with ",t),null)}_queryMatch(t,e,s){const i=t.substr(0,1),h=t.substr(1,t.length);let r=!1;return r="#"===i?e.idname===h:"."===i?-1!==e.classnames.indexOf(h):e.fullname===t,r&&s.push(e),r}_searchNodes(t,e,s,i=!1){if(e.childNodes&&e.childNodes.length>0){const h=[];for(let r=0;r<e.childNodes.length;r++){const n=e.childNodes[r];if(this._queryMatch(t,n,s)&&i)return!0;n.childNodes&&n.childNodes.length>0&&h.push(n)}for(let e=0;e<h.length;e++)if(this._searchNodes(t,h[e],s,i))return!0}return!1}querySelector(t){const e=[];return this._queryMatch(t,this.root,e)?e[0]:(this._searchNodes(t,this.root,e,!0),e[0]||null)}querySelectorAll(t){const e=[],s="#"===t.substr(0,1);return this._queryMatch(t,this.root,e)&&s||this._searchNodes(t,this.root,e,s),e}bindSlot(t,e){return this.getDisplayByQuerySelector(t).addChild(e),this}unbindSlot(t,e){return this.getDisplayByQuerySelector(t).removeChild(e),this}_emitFrame(t){this.emit(`@${t}`)}update(t,e=!1){if(!this.living||!this.isDisplayLoaded||this.isPaused&&!e)return;const s=this._updateTime(t),i=this.beginFrame+this.frameNum;this.root.updateFrame(i);const h=i>>0;this._lastFrame!==h&&(this._emitFrame(this.direction>0?h:this._lastFrame),this._lastFrame=h),!1===s?(this.emit("enterFrame",i),this.emit("update",this.frameNum/this.duration)):this.hadEnded!==s&&!0===s&&this.emit("complete"),this.hadEnded=s}_updateTime(t){const e=this.direction*this.timeScale*t;if(this._waitCut>0)return this._waitCut-=Math.abs(e),null;if(this.isPaused||this._delayCut>0)return this._delayCut>0&&(this._delayCut-=Math.abs(e)),null;this.frameNum+=e/this._timePerFrame;let s=!1;return this._spill()&&(this._repeatsCut>0||this.infinite?(this._repeatsCut>0&&--this._repeatsCut,this._delayCut=this.delay,this.alternate?(this.direction*=-1,this.frameNum=c.codomainBounce(this.frameNum,0,this.duration)):(this.direction=1,this.frameNum=c.euclideanModulo(this.frameNum,this.duration)),this.emit("loopComplete")):(this.overlapMode||(this.frameNum=c.clamp(this.frameNum,0,this.duration),this.living=!1),s=!0)),s}_spill(){const t=this.frameNum<=0&&-1===this.direction,e=this.frameNum>=this.duration&&1===this.direction;return t||e}frameToTime(t){return t*this._timePerFrame}setSpeed(t){this.timeScale=t}playSegment(t,e={}){if(!t)return;let s=null;c.isArray(t)?s=t:c.isString(t)&&(s=this.segments[t],c.isArray(s)&&(this._segmentName=t)),c.isArray(s)&&(this.beginFrame=c.isNumber(s[0])?s[0]:this._defaultSegment[0],this.endFrame=c.isNumber(s[1])?s[1]:this._defaultSegment[1],c.isNumber(e.repeats)&&(this.repeats=e.repeats),c.isBoolean(e.infinite)&&(this.infinite=e.infinite),c.isBoolean(e.alternate)&&(this.alternate=e.alternate),c.isNumber(e.wait)&&(this.wait=e.wait),c.isNumber(e.delay)&&(this.delay=e.delay),this.replay())}goToAndStop(t,e=!1){this.frameNum=e?t:t*this.frameMult,this.update(0,!0),this.pause()}goToAndPlay(t,e=!1){this.frameNum=e?t:t*this.frameMult,this.update(0,!0),this.resume()}getDuration(t){const e=this.endFrame-this.beginFrame;return t?e:e/this.frameRate}setDirection(t){return this.direction=t<0?-1:1,this}pause(){return this._pausedNeedSet?this._pausedNeedSet=!1:this._pausedNeedSet=null,this.isPaused=!0,this}resume(){return this._pausedNeedSet?this._pausedNeedSet=!1:this._pausedNeedSet=null,this.isPaused=!1,this}play(){return this.resume()}replay(){return this._pausedNeedSet?this._pausedNeedSet=!1:this._pausedNeedSet=null,this.isPaused=!1,this._repeatsCut=this.repeats,this._delayCut=this.delay,this.living=!0,this.frameNum=0,this.duration=Math.floor(this.endFrame-this.beginFrame),this.direction=1,this}show(){this._justDisplayNeedSet?this._justDisplayNeedSet=!1:this._justDisplayNeedSet=null,this.group.visible=!0}hide(){this._justDisplayNeedSet?this._justDisplayNeedSet=!1:this._justDisplayNeedSet=null,this.group.visible=!1}destroy(){this.parent&&this.parent.remove(this),this.group.parent&&this.group.parent.removeChild(this.group),this.pause(),this.root=null,this.group=null,this.display=null,this.textureLoader&&(this.textureLoader.off("complete"),this.textureLoader=null),this.jsonLoader&&(this.jsonLoader.off("success"),this.jsonLoader=null),this.keyframes=null,this.living=!1}}class re extends u{constructor(t){super(),this._lastTime=0,this._snippet=0,this.timeScale=1,this.isPaused=!1,this.ticker=t.ticker?t.ticker:t,this.groups=[],this.update=this.update.bind(this),this.ticker&&this.start()}add(t){const e=arguments.length;if(e>1)for(let t=0;t<e;t++)this.add(arguments[t]);else null!==t.parent&&t.parent.remove(t),t.parent=this,this.groups.push(t);return t}remove(t){if(arguments.length>1)for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);const e=this.groups.indexOf(t);-1!==e&&(t.parent=null,this.groups.splice(e,1))}parseAnimation(t){const e=new he(t);return this.add(e)}setSpeed(t){this.timeScale=t}start(){return this._lastTime=Date.now(),this.ticker.add(this.update),this}stop(){return this.ticker.remove(this.update),this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}update(){if(this.timeline(),this.isPaused)return;const t=this.timeScale*this._snippet,e=this.groups.length;for(let s=0;s<e;s++)this.groups[s].update(t);this.emit("update",this._snippet)}timeline(){let t=Date.now()-this._lastTime;(!this._lastTime||t>200)&&(this._lastTime=Date.now(),t=Date.now()-this._lastTime),this._lastTime+=t,this._snippet=t}destroy(){for(let t=this.groups.length-1;t>=0;t--)this.groups[t].destroy()}}class ne extends i.Graphics{constructor(t){super(),this.parentCompBox=t,this.lineStyle(0)}updateLayerMask(t){for(let e=0;e<t.viewData.length;e++){if(t.viewData[e].inv){const t=this.parentCompBox;this.moveTo(0,0),this.lineTo(t.w,0),this.lineTo(t.w,t.h),this.lineTo(0,t.h),this.lineTo(0,0)}const s=t.viewData[e].v,i=s.v[0];this.moveTo(i[0],i[1]);const h=s._length;let r=1;for(;r<h;r++){const t=s.o[r-1],e=s.i[r],i=s.v[r];this.bezierCurveTo(t[0],t[1],e[0],e[1],i[0],i[1])}const n=s.o[r-1],a=s.i[0],o=s.v[0];this.bezierCurveTo(n[0],n[1],a[0],a[1],o[0],o[1]),t.viewData[e].inv&&this.addHole()}}updateMasks(t){this.clear(),this.beginFill(0),this.updateLayerMask(t),this.endFill()}}class ae extends i.Graphics{constructor(t){super(),this.viewport=t,this.lineStyle(0),this.initCompMask()}initCompMask(){this.clear(),this.beginFill(0);const t=this.viewport;this.moveTo(0,0),this.lineTo(t.w,0),this.lineTo(t.w,t.h),this.lineTo(0,t.h),this.lineTo(0,0),this.endFill()}}class oe extends i.Container{constructor(t,e){super(),this.lottieElement=t,this.config=e}onSetupLottie(){if(this.config.maskComp){const t=this.config.viewport;this.preCompMask=new ae(t),this.mask=this.preCompMask,this.addChild(this.mask)}if(this.lottieElement.hasValidMasks()){const t=this.config.session.local;if(this.graphicsMasks=new ne(t),this.mask){const t=new i.Container;t.mask=this.graphicsMasks,t.addChild(this.mask),this.lottieElement.innerDisplay=t,this.addChild(t)}else this.mask=this.graphicsMasks,this.addChild(this.mask)}}setHierarchy(t){this.hierarchy=t}show(){this.visible=!0}hide(){this.visible=!1}updateLottieTransform(t){this.x=t.x,this.y=t.y,this.pivot.x=t.anchorX,this.pivot.y=t.anchorY,this.scale.x=t.scaleX,this.scale.y=t.scaleY,this.rotation=t.rotation,this.alpha=t.alpha}updateLottieMasks(t){this.graphicsMasks&&this.graphicsMasks.updateMasks(t)}}class le extends i.Shader{constructor(t){super(t,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","}"].join("\n"),["uniform float alpha;","uniform vec3 color;","void main(void){","   gl_FragColor = vec4(color * alpha, alpha);","}"].join("\n"))}}function pe(t,e){this.buffer=new t(10),this.length=0}pe.prototype={reset(){this.length=0},destroy(){this.buffer=null,this.length=0},push(...t){if(this.length+t.length>this.buffer.length){const e=new this.buffer.constructor(Math.max(this.length+t.length,Math.round(2*this.buffer.length)));e.set(this.buffer,0),this.buffer=e}for(let e=0;e<t.length;e++)this.buffer[this.length++]=t[e];return this.length},setBuffer(t){this.buffer=t,this.length=this.buffer.length}};class ce{constructor(t,e,s){this.gl=t,this.vertices=new pe(Float32Array),this.indices=new pe(Uint16Array),this.buffer=i.glCore.GLBuffer.createVertexBuffer(t),this.indexBuffer=i.glCore.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.shader=e,this.vao=new i.glCore.VertexArrayObject(t,s).addIndex(this.indexBuffer).addAttribute(this.buffer,e.attributes.aVertexPosition,t.FLOAT,!1,8,0)}reset(){this.vertices.reset(),this.indices.reset()}upload(){this.buffer.upload(this.vertices.buffer),this.indexBuffer.upload(this.indices.buffer),this.dirty=!1}destroy(){this.vertices.destroy(),this.indices.destroy(),this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null}}function ue(t,e,s){return t.push(e,s),t}function de(t,e){return Math.sqrt(t*t+e*e)}function fe(t,e,s,i,h){return function(t,e){const s=1-t;return s*s*s*e}(t,e)+function(t,e){const s=1-t;return 3*s*s*t*e}(t,s)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,h)}function me(t,e,s,i,h,r,n){if(!(isFinite(e)&&isFinite(s)&&isFinite(i)&&isFinite(h)&&isFinite(r)&&isFinite(n)))return t;const a=t[t.length-2],o=t[t.length-1],l=function(t,e,s,i,h,r,n,a){const o=h-s,l=r-i,p=s-t,c=i-e;return de(n-h,a-r)+de(o,l)+de(p,c)}(a,o,e,s,i,h,r,n),p=Math.min(10/l,.5);for(let l=p;l<1;l+=p){const p=fe(l,a,e,i,r),c=fe(l,o,s,h,n);t.push(p,c)}return t.push(r,n),t}function ge(t,e){for(let s=0;s<t.length;s++){const{cmd:i,args:h}=t[s];switch(i){case"M":case"L":ue(e,h[0],h[1]);break;case"C":me(e,h[0],h[1],h[2],h[3],h[4],h[5])}}return e}function ye(t,e,s,i,h,r,n){h%=2*Math.PI,r%=2*Math.PI,h<0&&(h+=2*Math.PI),r<0&&(r+=2*Math.PI),h>=r&&(r+=2*Math.PI);let a=r-h,o=1;n&&(o=-1,a=2*Math.PI-a,0==a&&(a=2*Math.PI));const l=a*i;let p=Math.sqrt(l/1)>>0;p=p%2==0?p+1:p;const c=a/p;let u=h;for(let h=0;h<p+1;h++)t.push(e,s,e+i*Math.cos(u),s+i*Math.sin(u)),u+=o*c}function ve(t,e,s){const i=ge(t.cmds,[]),h=t.isClosed,r=e.lineDash.length>=2,n=e.lineWidth/2;let a,o=[i[0],i[1]];for(let t=2;t<i.length;t+=2)i[t]==o[o.length-2]&&i[t+1]==o[o.length-1]||o.push(i[t],i[t+1]);if(!h||o[o.length-2]==o[0]&&o[o.length-1]==o[1]||o.push(o[0],o[1]),r){const t=function(t,e,s,i){e&&t.push(t[0],t[1]);let h=i,r=0,n=1;for(;h>s[r];)h-=s[r],r++,n=n?0:1,r==s.length&&(r=0);let a=[t[0],t[1]],o=[n];for(let e=2;e<t.length;e+=2){let i=[t[e]-t[e-2],t[e+1]-t[e-1]],l=de(i[0],i[1]);i[0]/=l,i[1]/=l;let p=0;for(;l-p+h>=s[r];)p+=s[r]-h,h=0,n=n?0:1,r++,r==s.length&&(r=0),o.push(n),a.push(t[e-2]+p*i[0],t[e-1]+p*i[1]);l-p!=0&&(a.push(t[e],t[e+1]),o.push(n)),h+=l-p}return e&&(t.pop(),t.pop(),a.pop(),a.pop(),o.pop()),{newPoints:a,toDrawOrNotToDraw:o}}(o,h,e.lineDash,e.lineDashOffset);a=t.toDrawOrNotToDraw,o=t.newPoints}const l=s.length;let p=s.length;const c=[];if(h)o.push(o[2],o[3]);else{const t=[o[2]-o[0],o[3]-o[1]],i=de(t[0],t[1]);t[0]/=i,t[1]/=i;const h=[-t[1],t[0]],l=[o[0]+n*h[0],o[1]+n*h[1]],u=[o[0]-n*h[0],o[1]-n*h[1]];if("butt"==e.lineCap)s.push(l[0],l[1],u[0],u[1]);else if("square"==e.lineCap)s.push(l[0]-n*t[0],l[1]-n*t[1],u[0]-n*t[0],u[1]-n*t[1]);else{s.push(o[0],o[1],l[0],l[1]);const t=Math.atan2(l[1]-o[1],l[0]-o[0]),e=Math.atan2(u[1]-o[1],u[0]-o[0]);ye(s,o[0],o[1],n,t,e),s.push(o[0],o[1],u[0],u[1]),s.push(l[0],l[1],u[0],u[1])}if(r){const t=a[0];for(let e=p;e<s.length;e+=2)c.push(t);p=s.length}}for(let t=2;t<o.length-2;t+=2){const i=[o[t]-o[t-2],o[t+1]-o[t-1]],h=[-i[1],i[0]];let l=de(h[0],h[1]);h[0]/=l,h[1]/=l;let u=[o[t+2]-o[t],o[t+3]-o[t+1]];l=de(u[0],u[1]),u[0]/=l,u[1]/=l;let d=[o[t]-o[t-2],o[t+1]-o[t-1]];l=de(d[0],d[1]),d[0]/=l,d[1]/=l;let f=[d[0]+u[0],d[1]+u[1]];l=de(f[0],f[1]);let m,g,y=0;l>0?(f[0]/=l,f[1]/=l,g=[-f[1],f[0]],m=g[0]*h[0]+g[1]*h[1],y=n/m):(y=0,g=[-f[1],f[0]]);const v=[o[t]+y*g[0],o[t+1]+y*g[1]],_=[o[t]-y*g[0],o[t+1]-y*g[1]];if("miter"==e.lineJoin&&1/m<=e.miterLimit)s.push(v[0],v[1],_[0],_[1]);else{const i=d[1]*u[0]-d[0]*u[1];if("round"==e.lineJoin)if(i<0){const e=[o[t]+d[1]*n,o[t+1]-d[0]*n],i=[o[t]+u[1]*n,o[t+1]-u[0]*n];s.push(v[0],v[1],e[0],e[1]);const h=Math.atan2(e[1]-o[t+1],e[0]-o[t]),r=Math.atan2(i[1]-o[t+1],i[0]-o[t]);ye(s,o[t],o[t+1],n,h,r),s.push(v[0],v[1],i[0],i[1])}else{const e=[o[t]-d[1]*n,o[t+1]+d[0]*n],i=[o[t]-u[1]*n,o[t+1]+u[0]*n];s.push(e[0],e[1],_[0],_[1]);const h=Math.atan2(i[1]-o[t+1],i[0]-o[t]),r=Math.atan2(e[1]-o[t+1],e[0]-o[t]);ye(s,o[t],o[t+1],n,h,r),s.push(i[0],i[1],_[0],_[1])}else if(i<0){const e=[o[t]+d[1]*n,o[t+1]-d[0]*n],i=[o[t]+u[1]*n,o[t+1]-u[0]*n];s.push(v[0],v[1],e[0],e[1],v[0],v[1],i[0],i[1])}else{const e=[o[t]-d[1]*n,o[t+1]+d[0]*n],i=[o[t]-u[1]*n,o[t+1]+u[0]*n];s.push(e[0],e[1],_[0],_[1],i[0],i[1],_[0],_[1])}}if(r){const e=a[t/2];for(let t=p;t<s.length;t+=2)c.push(e);p=s.length}}if(h)s.push(s.buffer[l],s.buffer[l+1],s.buffer[l+2],s.buffer[l+3]);else{const t=[o[o.length-2]-o[o.length-4],o[o.length-1]-o[o.length-3]],i=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2));t[0]/=i,t[1]/=i;const h=[-t[1],t[0]],r=[o[o.length-2]+n*h[0],o[o.length-1]+n*h[1]],a=[o[o.length-2]-n*h[0],o[o.length-1]-n*h[1]];if("butt"==e.lineCap)s.push(r[0],r[1],a[0],a[1]);else if("square"==e.lineCap)s.push(r[0]+n*t[0],r[1]+n*t[1],a[0]+n*t[0],a[1]+n*t[1]);else{s.push(r[0],r[1],a[0],a[1]),s.push(o[o.length-2],o[o.length-1],a[0],a[1]);const t=Math.atan2(a[1]-o[o.length-1],a[0]-o[o.length-2]),e=Math.atan2(r[1]-o[o.length-1],r[0]-o[o.length-2]);ye(s,o[o.length-2],o[o.length-1],n,t,e),s.push(o[o.length-2],o[o.length-1],r[0],r[1])}}if(r){const t=a[a.length-1];for(let e=p;e<s.length;e+=2)c.push(t);p=s.length}return c}function _e(t,e){const s=t.isClosed;let i=!0;const h=ge(t.cmds,[]);let r=[h[0],h[1]];for(let t=2;t<h.length;t+=2)h[t]==r[r.length-2]&&h[t+1]==r[r.length-1]||r.push(h[t],h[t+1]);if(!s||r[r.length-2]==r[0]&&r[r.length-1]==r[1]||r.push(r[0],r[1]),r.length>=6){for(let t=0;t<r.length;t++)e.push(r[t]);i=!1}return i}class ke extends i.ObjectRenderer{constructor(t){super(t),this.graphicsDataPool=[],this.primitiveShader=null,this.webGLData=null,this.gl=t.gl,this.CONTEXT_UID=0}onContextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new le(this.gl)}destroy(){i.ObjectRenderer.prototype.destroy.call(this);for(let t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null}render(t){const e=this.renderer,s=e.gl,h=this.getWebGLData(t);if(t.isDirty&&this.updateGraphics(t,h),0===h.indices.length)return;const r=this.primitiveShader;e.bindShader(r),e.state.setBlendMode(t.blendMode),r.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),r.uniforms.color=i.utils.hex2rgb(t.color),r.uniforms.alpha=t.worldAlpha,e.bindVao(h.vao),h.vao.draw(s.TRIANGLES,h.indices.length)}updateGraphics(t,e){e.reset(),"stroke"===t.drawType?this.buildStroke(t,e):this.buildFill(t,e),t.isDirty=!1}buildStroke(t,e){const{vertices:s,indices:i}=e,{paths:h,lineStyle:r}=t,n=r.lineDash.length>=2;for(let t=0;t<h.length;t++){const e=h[t],a=s.length/2,o=ve(e,r,s);if(n)for(let t=a+2;t<s.length/2;t+=2)o[t-a-1]&&i.push(t-2,t,t-1,t,t+1,t-1);else for(let t=a+2;t<s.length/2;t+=2)i.push(t-2,t,t-1,t,t+1,t-1)}e.upload()}buildFill(t,e){const{vertices:s,indices:h}=e,{paths:r}=t;let n=[];const a=[];for(let t=0;t<r.length;t++){const e=r[t],s=[];if(_e(e,s))break;const h=e.holes,o=[];for(let t=0;t<h.length;t++){const e=h[t],i=s.length;if(_e(e,s))break;o.push(i/2)}const l=i.utils.earcut(s,o,2),p=n.length/2;for(let t=0;t<s.length;t+=2)n.push(s[t],s[t+1]);for(let t=0;t<l.length;t+=3)a.push(p+l[t],p+l[t+1],p+l[t+2])}n.length<6||a<3||(s.setBuffer(new Float32Array(n)),h.setBuffer(new Uint16Array(a)),e.upload())}getWebGLData(t){return t.webGLData&&this.CONTEXT_UID===t.webGLData.CONTEXT_UID||(t.webGLData=new ce(this.renderer.gl,this.primitiveShader,this.renderer.state.attribState),t.webGLData.CONTEXT_UID=this.CONTEXT_UID),t.webGLData}}i.WebGLRenderer.registerPlugin("lottiegraphics",ke),i.CanvasRenderer.registerPlugin("lottiegraphics",class{constructor(t){this.renderer=t}destroy(){this.renderer=null}render(t){const e=this.renderer,s=e.context,i=t.lineStyle,h=t.worldAlpha,r=t.transform.worldTransform,n=e.resolution;s.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),e.setBlendMode(t.blendMode),s.globalAlpha=h,"stroke"===t.drawType?(s.lineWidth=i.lineWidth,s.lineJoin=i.lineJoin,s.miterLimit=i.miterLimit,s.lineCap=i.lineCap,s.lineDashOffset=i.lineDashOffset,s.setLineDash(i.lineDash||[]),this.buildStroke(t)):this.buildFill(t)}buildStroke(t){const e=this.renderer.context,s=`#${`00000${(0|t.color).toString(16)}`.substr(-6)}`,{paths:i,lineStyle:h}=t;e.lineWidth=h.lineWidth,e.lineJoin=h.lineJoin,e.miterLimit=h.miterLimit,e.lineCap=h.lineCap,e.lineDashOffset=h.lineDashOffset,e.setLineDash(h.lineDash||[]),e.beginPath();for(let t=0;t<i.length;t++)this.drawPath(e,i[t]);e.strokeStyle=s,e.stroke()}buildFill(t){const e=this.renderer.context,s=`#${`00000${(0|t.color).toString(16)}`.substr(-6)}`,{paths:i}=t;e.beginPath();for(let t=0;t<i.length;t++){const s=i[t];this.drawPath(e,s);for(let t=0;t<s.holes.length;t++)this.drawPath(e,s.holes[t])}e.fillStyle=s,e.fill()}drawPath(t,e){for(let s=0;s<e.cmds.length;s++){const{cmd:i,args:h}=e.cmds[s];switch(i){case"M":t.moveTo(h[0],h[1]);break;case"L":t.lineTo(h[0],h[1]);break;case"C":t.bezierCurveTo(h[0],h[1],h[2],h[3],h[4],h[5])}}}});class Se{constructor(){this.cmds=[],this.holes=[],this.isClosed=!1,this.isClockWise=!1}getLength(){return this.cmds.length}add(t,e){this.cmds.push({cmd:t,args:e})}moveTo(t=0,e=0){this.add("M",[t,e])}lineTo(t,e){this.add("L",[t,e])}bezierCurveTo(t,e,s,i,h,r){this.add("C",[t,e,s,i,h,r])}closePath(){this.isClosed=!0}}class xe extends i.Container{constructor(){super(),this.paths=[],this._samplerPoints=[],this.currentPath=null,this.color=0,this.lineStyle={lineWidth:1,lineJoin:"miter",miterLimit:10,lineCap:"butt",lineDash:[],lineDashOffset:0},this.isDirty=!0,this.drawType="",this.blendMode=i.BLEND_MODES.NORMAL,this.webGLData=null,this.firstIsClockWise=!0,this.preClockWiseStatus=null}clear(){this.paths.length=0,this.currentPath=null,this.firstIsClockWise=!0,this.preClockWiseStatus=null,this.isDirty=!0}moveTo(t=0,e=0){this.endPath(),this.currentPath=new Se,this.currentPath.moveTo(t,e),this._samplerPoints.push([t,e])}lineTo(t,e){this.currentPath.lineTo(t,e),this._samplerPoints.push([t,e])}bezierCurveTo(t,e,s,i,h,r){this.currentPath.bezierCurveTo(t,e,s,i,h,r),this._samplerPoints.push([h,r])}endPath(){if(this.currentPath&&this.currentPath.getLength()>1){const t=this.paths.length,e=function(t){const e=t.length;let s=0;for(let i=e-1,h=0;h<e;i=h++)s+=t[i][0]*t[h][1]-t[h][0]*t[i][1];return.5*s}(this._samplerPoints)>0;this.currentPath.isClockWise=e,0===t&&(this.firstIsClockWise=e),t>0&&this.preClockWiseStatus===this.firstIsClockWise&&this.preClockWiseStatus!==e?(t>0?this.paths[t-1]:null).holes.push(this.currentPath):(this.paths.push(this.currentPath),this.preClockWiseStatus=e),this.currentPath=null,this.isDirty=!0}this._samplerPoints.length=0}closePath(){this.currentPath.closePath()}stroke(){this.endPath(),this.drawType="stroke"}fill(){null!==this.currentPath&&(this.closePath(),this.endPath(),this.drawType="fill")}_renderWebGL(t){t.setObjectRenderer(t.plugins.lottiegraphics),t.plugins.lottiegraphics.render(this)}_renderCanvas(t){t.plugins.lottiegraphics.render(this)}}class Te extends i.Graphics{constructor(t,e){super(),this.lottieElement=t,this.config=e;const s=parseInt(e.color.replace("#",""),16);this.beginFill(s),this.drawRect(0,0,e.rect.width,e.rect.height),this.endFill()}onSetupLottie(){if(this.lottieElement.hasValidMasks()){const t=this.config.session.local;this.graphicsMasks=new ne(t),this.mask=this.graphicsMasks,this.addChild(this.mask)}}setHierarchy(t){this.hierarchy=t}show(){this.visible=!0}hide(){this.visible=!1}updateLottieTransform(t){this.x=t.x,this.y=t.y,this.pivot.x=t.anchorX,this.pivot.y=t.anchorY,this.scale.x=t.scaleX,this.scale.y=t.scaleY,this.rotation=t.rotation,this.alpha=t.alpha}updateLottieMasks(t){this.graphicsMasks&&this.graphicsMasks.updateMasks(t)}}class Pe extends i.Sprite{constructor(t,e){const{texture:s,asset:h}=e;super(s),s.baseTexture.hasLoaded?(s.orig=new i.Rectangle(0,0,h.w,h.h),s._updateUvs()):s.baseTexture.on("loaded",(()=>{s.orig=new i.Rectangle(0,0,h.w,h.h),s._updateUvs()})),this.lottieElement=t,this.config=e}onSetupLottie(){if(this.lottieElement.hasValidMasks()){const t=this.config.session.local;this.graphicsMasks=new ne(t),this.mask=this.graphicsMasks,this.addChild(this.mask)}}setHierarchy(t){this.hierarchy=t}show(){this.visible=!0}hide(){this.visible=!1}updateLottieTransform(t){this.x=t.x,this.y=t.y,this.pivot.x=t.anchorX,this.pivot.y=t.anchorY,this.scale.x=t.scaleX,this.scale.y=t.scaleY,this.rotation=t.rotation,this.alpha=t.alpha}updateLottieMasks(t){this.graphicsMasks&&this.graphicsMasks.updateMasks(t)}}const Me=/^(https?:)?\/\//;class we extends u{constructor(t,{prefix:e,autoLoad:s=!0}){super(),this.assets=t,this.prefix=e||"",this.textures={},this._total=0,this._failed=0,this._received=0,this.loaded=!1,s&&this.load()}load(){this.assets.forEach((t=>{const e=t.id,s=function(t,e){if(1===t.e)return t.p;e&&(e=e.replace(/\/?$/,"/"));const s=t.u+t.p;let i="";return i=t.up?t.up:Me.test(s)?s:e+s,i}(t,this.prefix),h=i.Texture.fromImage(s,"*");this.textures[e]=h,this._total++,h.baseTexture.hasLoaded?(this._received++,this.emit("update"),this._received+this._failed>=this._total&&this._onComplete()):(h.baseTexture.once("loaded",(()=>{this._received++,this.emit("update"),this._received+this._failed>=this._total&&this._onComplete()})),h.baseTexture.once("error",(()=>{this._failed++,this.emit("update"),this._received+this._failed>=this._total&&this._onComplete()})))}))}_onComplete(){this.loaded=!0,this.emit("complete"),this._failed>0&&(this._failed>=this._total?this.emit("fail"):this.emit("partlyfail",this._failed))}getTextureById(t){return this.textures[t]}}function be(t){return t.response&&"object"==typeof t.response?t.response:t.response&&"string"==typeof t.response?JSON.parse(t.response):t.responseText?JSON.parse(t.responseText):void 0}class De extends u{constructor(t){super(),this.path=t,this.onSuccess=this.onSuccess.bind(this),this.onFail=this.onFail.bind(this),function(t,e,s){let i,h=new XMLHttpRequest;h.open("GET",t,!0);try{h.responseType="json"}catch(t){console.error("lottie-pixi loadAjax:",t)}h.send(),h.onreadystatechange=function(){if(4==h.readyState)if(200==h.status)i=be(h),e(i);else try{i=be(h),e(i)}catch(t){s&&s(t)}}}(t,this.onSuccess,this.onFail)}onSuccess(t){this.emit("success",t),this.emit("complete",t)}onFail(t){this.emit("fail",t),this.emit("error",t)}}const Ce={Linear:{None:t=>t},Ease:{In:function(){const t=new F(.42,0,1,1);return function(e){return t.get(e)}}(),Out:function(){const t=new F(0,0,.58,1);return function(e){return t.get(e)}}(),InOut:function(){const t=new F(.42,0,.58,1);return function(e){return t.get(e)}}(),Bezier(t,e,s,i){const h=new F(t,e,s,i);return function(t){return h.get(t)}}},Elastic:{In:t=>0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI),Out:t=>0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1,InOut:t=>0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1},Back:{In(t){const e=1.70158;return t*t*((e+1)*t-e)},Out(t){const e=1.70158;return--t*t*((e+1)*t+e)+1},InOut(t){const e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:t=>1-Ce.Bounce.Out(1-t),Out:t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,InOut:t=>t<.5?.5*Ce.Bounce.In(2*t):.5*Ce.Bounce.Out(2*t-1)+.5}};function Le(t){u.call(this),this.element=t.element||{},this.duration=t.duration||300,this.living=!0,this.resident=t.resident||!1,this.infinite=t.infinite||!1,this.alternate=t.alternate||!1,this.repeats=t.repeats||0,this.delay=t.delay||0,this.wait=t.wait||0,this.timeScale=c.isNumber(t.timeScale)?t.timeScale:1,t.onComplete&&this.on("complete",t.onComplete.bind(this)),t.onUpdate&&this.on("update",t.onUpdate.bind(this)),this.init(),this.paused=!1}function Ae(t){Le.call(this,t),t.from=t.from||{};for(const e in t.to)c.isUndefined(t.from[e])&&(t.from[e]=this.element[e]);this.ease=t.ease||Ce.Ease.InOut,this.from=t.from,this.to=t.to}function Oe(t){Le.call(this,t),this.dynamicProperties=[],this._mdf=!1,this.keyframes=c.copyJSON(t.keyframes),this.frameRate=t.frameRate||30,this.tpf=1e3/this.frameRate,this.ip=c.isUndefined(t.ip)?this.keyframes.ip:t.ip,this.op=c.isUndefined(t.ip)?this.keyframes.op:t.op,this.tfs=this.op-this.ip,this.duration=this.tfs*this.tpf,this.ignoreProps=c.isArray(t.ignoreProps)?t.ignoreProps:[],this.transform=new Kt(this,this.keyframes.ks)}function Fe(t,e){Le.call(this,e),this.runners=[],this.queues=[],this.cursor=0,this.total=0,this.alternate=!1,t&&this.then(t)}Le.prototype=Object.create(u.prototype),Le.prototype.update=function(t){const e=this.direction*this.timeScale*t;if(this.waitCut>0)return void(this.waitCut-=Math.abs(e));if(this.paused||!this.living||this.delayCut>0)return void(this.delayCut>0&&(this.delayCut-=Math.abs(e)));this.progress+=e;let s=!1;const i=this.progress;let h;return this.spill()&&(this.repeatsCut>0||this.infinite?(this.repeatsCut>0&&--this.repeatsCut,this.delayCut=this.delay,this.alternate?(this.direction*=-1,this.progress=c.codomainBounce(this.progress,0,this.duration)):(this.direction=1,this.progress=c.euclideanModulo(this.progress,this.duration))):s=!0),s?(this.resident||(this.living=!1),this.progress=c.clamp(i,0,this.duration),h=this.nextPose(),this.emit("complete",h,i-this.progress)):(h=this.nextPose(),this.emit("update",h,this.progress/this.duration)),h},Le.prototype.spill=function(){const t=this.progress<=0&&-1===this.direction,e=this.progress>=this.duration&&1===this.direction;return t||e},Le.prototype.init=function(){this.direction=1,this.progress=0,this.repeatsCut=this.repeats,this.delayCut=this.delay,this.waitCut=this.wait},Le.prototype.nextPose=function(){console.warn("should be overwrite")},Le.prototype.linear=function(t,e,s){return(e-t)*s+t},Le.prototype.setSpeed=function(t){return this.timeScale=t,this},Le.prototype.pause=function(){return this.paused=!0,this},Le.prototype.resume=function(){return this.paused=!1,this},Le.prototype.restart=Le.prototype.resume,Le.prototype.stop=function(){return this.repeats=0,this.infinite=!1,this.progress=this.duration,this},Le.prototype.cancel=function(){return this.living=!1,this},Ae.prototype=Object.create(Le.prototype),Ae.prototype.nextPose=function(){const t={},e=this.ease(this.progress/this.duration);for(const s in this.to)void 0!==this.element[s]&&(this.element[s]=t[s]=this.linear(this.from[s],this.to[s],e));return t},Oe.prototype=Object.create(Le.prototype),Oe.prototype.prepareProperties=function(t){const e=this.dynamicProperties.length;let s;for(s=0;s<e;s+=1)this.dynamicProperties[s].getValue(t),this.dynamicProperties[s]._mdf&&(this._mdf=!0)},Oe.prototype.addDynamicProperty=function(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)},Oe.prototype.nextPose=function(){const t={},e=this.ip+this.progress/this.tpf;return this.prepareProperties(e),-1===this.ignoreProps.indexOf("position")&&(-1===this.ignoreProps.indexOf("x")&&(t.x=this.element.x=this.transform.x),-1===this.ignoreProps.indexOf("y")&&(t.y=this.element.y=this.transform.y)),-1===this.ignoreProps.indexOf("pivot")&&(t.pivot={},-1===this.ignoreProps.indexOf("pivotX")&&(t.pivot.x=this.element.pivot.x=this.transform.anchorX),-1===this.ignoreProps.indexOf("pivotY")&&(t.pivot.y=this.element.pivot.y=this.transform.anchorY)),-1===this.ignoreProps.indexOf("scale")&&(t.scale={},-1===this.ignoreProps.indexOf("scaleX")&&(t.scale.x=this.element.scale.x=this.transform.scaleX),-1===this.ignoreProps.indexOf("scaleY")&&(t.scale.y=this.element.scale.y=this.transform.scaleY)),-1===this.ignoreProps.indexOf("rotation")&&(t.rotation=this.element.rotation=this.transform.rotation),-1===this.ignoreProps.indexOf("alpha")&&(t.alpha=this.element.alpha=this.transform.alpha),t},Fe.prototype=Object.create(Le.prototype),Fe.prototype.then=function(t){return this.queues.push(t),this.total=this.queues.length,this},Fe.prototype.nextOne=function(t,e){this.runners[this.cursor].init(),this.cursor++,this._residueTime=Math.abs(e)},Fe.prototype.initOne=function(){const t=this.queues[this.cursor];t.infinite=!1,t.resident=!0,t.element=this.element;let e=null;t.keyframes?e=new Oe(t):t.to&&(e=new Ae(t)),null!==e&&(e.on("complete",this.nextOne.bind(this)),this.runners.push(e))},Fe.prototype.nextPose=function(t){return!this.runners[this.cursor]&&this.queues[this.cursor]&&this.initOne(),this._residueTime>0&&(t+=this._residueTime,this._residueTime=0),this.runners[this.cursor].update(t)},Fe.prototype.update=function(t){if(this.wait>0)return void(this.wait-=Math.abs(t));if(this.paused||!this.living||this.delayCut>0)return void(this.delayCut>0&&(this.delayCut-=Math.abs(t)));const e=this.cursor,s=this.nextPose(this.timeScale*t);return this.emit("update",{index:e,pose:s},this.progress/this.duration),this.spill()&&(this.repeats>0||this.infinite?(this.repeats>0&&--this.repeats,this.delayCut=this.delay,this.cursor=0):(this.resident||(this.living=!1),this.emit("complete",s))),s},Fe.prototype.spill=function(){return this.cursor>=this.total};const Ie={settings:i.settings,UPDATE_PRIORITY:i.UPDATE_PRIORITY,animationTicker:i.ticker.shared};function Ee(t){this.element=t,this.animates=[],this.timeScale=1,this.paused=!1,this.updateDeltaTime=this.updateDeltaTime.bind(this),Ie.animationTicker.add(this.updateDeltaTime,Ie.UPDATE_PRIORITY.HIGH)}Ee.prototype.clearAnimators=function(t){if(this.paused)return;const e=this.animates;for(let s=0;s<t.length;s++){const i=t[s];e[i].living||e[i].resident||this.animates.splice(i,1)}},Ee.prototype.updateDeltaTime=function(t){if(this.animates.length<=0)return;const e=t/Ie.settings.TARGET_FPMS;this.update(e)},Ee.prototype.update=function(t){if(this.paused)return;if(this.animates.length<=0)return;t=this.timeScale*t;const e=[];for(let s=0;s<this.animates.length;s++)this.animates[s].living||this.animates[s].resident?this.animates[s].update(t):e.push(s);e.length>0&&this.clearAnimators(e)},Ee.prototype.animate=function(t,e){return t.element=this.element,this._addMove(new Ae(t),e)},Ee.prototype.queues=function(t,e,s){return e.element=this.element,this._addMove(new Fe(t,e),s)},Ee.prototype.bodymovin=function(t,e){return t.element=this.element,this._addMove(new Oe(t),e)},Ee.prototype._addMove=function(t,e){return e&&this.clearAll(),this.animates.push(t),t},Ee.prototype.pause=function(){this.paused=!0},Ee.prototype.resume=function(){this.paused=!1},Ee.prototype.restart=Ee.prototype.resume,Ee.prototype.setSpeed=function(t){this.timeScale=t},Ee.prototype.clearAll=function(){this.animates.length=0},i.DisplayObject.prototype.setupAnimations=function(){this.animations||(this.animations=new Ee(this))},i.DisplayObject.prototype.animate=function(t,e){return this.animations||this.setupAnimations(),this.animations.animate(t,e)},i.DisplayObject.prototype.queues=function(t,e={},s){return this.animations||this.setupAnimations(),this.animations.queues(t,e,s)},i.DisplayObject.prototype.bodymovin=function(t,e){return this.animations||this.setupAnimations(),this.animations.bodymovin(t,e)},Object.defineProperties(i.DisplayObject.prototype,{scaleXY:{get(){return this.scale.x},set(t){this.scale.set(t)}},scaleX:{get(){return this.scale.x},set(t){this.scale.x=t}},scaleY:{get(){return this.scale.y},set(t){this.scale.y=t}},pivotX:{get(){return this.pivot.x},set(t){this.pivot.x=t}},pivotY:{get(){return this.pivot.y},set(t){this.pivot.y=t}}}),i.Container.prototype.updateTransform=function(){this.emit("pretransform"),this._boundsID++,this.hierarchy&&this.hierarchy.transform?(this.hierarchy.updateTransform(),this.transform.updateTransform(this.hierarchy.transform)):this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const e=this.children[t];e.visible&&e.updateTransform()}this.emit("posttransform")},i.Container.prototype.containerUpdateTransform=i.Container.prototype.updateTransform;var Ve=Number.isFinite||function(t){return!("number"!=typeof t||t!=t||t===1/0||t===-1/0)},Ne=Number.isInteger||function(t){return"number"==typeof t&&Ve(t)&&Math.floor(t)===t},qe=/^-?\d+$/,je=function(t){return"number"==typeof t?Ne(t)?t:void 0:"string"==typeof t&&qe.test(t)?parseInt(t,10):void 0},Be=/OS (\d\d?_\d(_\d)?)/;const{major:Re}=function(t){if(!t)return null;var e=Be.exec(t);if(!e)return null;var s=e[1].split("_").map(je);return{major:s[0],minor:s[1],patch:s[2]||0}}(window.navigator.userAgent)||{};function Xe(t){if(window.URL=window.URL||window.webkitURL,window.URL&&URL.createObjectURL){const e=function(t){let e=atob(t.split(",")[1]),s=new ArrayBuffer(e.length),i=new Uint8Array(s),h=t.split(",")[0].match(/:(.*?);/)[1];for(let t=0,s=e.length;t<s;t++)i[t]=e.charCodeAt(t);let r,n=[i];try{r=new Blob(n,{type:h})}catch(t){console.log(t)}return r}(t);return URL.createObjectURL(e)}return t}m.registerLoaderByType(m.Type.Texture,(function(t,e){return void 0===e&&(e={}),new we(t,e)})),m.registerLoaderByType(m.Type.Ajax,(function(t){return new De(t)})),qt.registerDisplayByType(qt.Type.Null,oe),qt.registerDisplayByType(qt.Type.Path,class extends xe{constructor(t,e){super(),this.lottieElement=t,this.config=e,this.passMatrix=new i.Matrix}setShapeTransform(){const t=this.lottieElement.preTransforms.finalTransform.props;this.passMatrix.set(t[0],t[1],t[4],t[5],t[12],t[13]),this.transform.setFromMatrix(this.passMatrix)}updateTransform(){this.setShapeTransform(),this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++}updateLottieGrahpics(t){const e=t.type;if(this.clear(),("st"===e||"gs"===e)&&0===t.wi||!t.data._shouldRender||0===t.coOp)return;const s=t.elements,i=s.length;for(let t=0;t<i;t+=1){const e=s[t].trNodes,i=e.length;for(let t=0;t<i;t++)"m"==e[t].t?this.moveTo(e[t].p[0],e[t].p[1]):"c"==e[t].t?this.bezierCurveTo(e[t].pts[0],e[t].pts[1],e[t].pts[2],e[t].pts[3],e[t].pts[4],e[t].pts[5]):this.closePath()}"st"!==e&&"gs"!==e||(t.da?(this.lineStyle.lineDash=t.da,this.lineStyle.lineDashOffset=t.do):this.lineStyle.lineDash=[]),"st"===e||"gs"===e?(this.lineStyle.lineWidth=t.wi,this.lineStyle.lineCap=t.lc,this.lineStyle.lineJoin=t.lj,this.lineStyle.miterLimit=t.ml||0,this.color=c.rgb2hex(t.co||t.grd),this.alpha=t.coOp,this.stroke()):(this.color=c.rgb2hex(t.co||t.grd),this.alpha=t.coOp,this.fill())}}),qt.registerDisplayByType(qt.Type.Shape,oe),qt.registerDisplayByType(qt.Type.Solid,Te),qt.registerDisplayByType(qt.Type.Sprite,Pe),qt.registerDisplayByType(qt.Type.Component,oe),qt.registerDisplayByType(qt.Type.Container,i.Container);var Ye=function(t){function s(){var e=null!==t&&t.apply(this,arguments)||this;return e.managerLife=["DisplayReady","ImageReady","success","error","complete","loopComplete","enterFrame","update"],e}return r(s,t),s.prototype.init=function(){this.renderSystem=this.game.systems.find((function(t){return t.application})),this.app=this.renderSystem.application},s.prototype.componentChanged=function(t){return o(this,void 0,void 0,(function(){return l(this,(function(s){return"Lottie"===t.componentName&&(t.type===e.OBSERVER_TYPE.ADD?this.add(t):t.type===e.OBSERVER_TYPE.REMOVE&&this.remove(t)),[2]}))}))},s.prototype.add=function(t){return o(this,void 0,void 0,(function(){var s,i,h,r,a,o,p,c;return l(this,(function(l){switch(l.label){case 0:return this.manager=new re(this.app),s=t.component,(i=this.renderSystem.containerManager.getContainer(t.gameObject.id))?(h=s.options,r=h.resource,a=function(t,e){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var h=0;for(i=Object.getOwnPropertySymbols(t);h<i.length;h++)e.indexOf(i[h])<0&&Object.prototype.propertyIsEnumerable.call(t,i[h])&&(s[i[h]]=t[i[h]])}return s}(h,["resource"]),[4,e.resource.getResource(r)]):[2];case 1:return o=l.sent().data,((p=n({},o.json||{})).assets||[]).forEach((function(t){var e;t.p&&(t.p=(e=t.p,Re<=8&&isBase64Reg.test(e)?Xe(e):e))})),c=this.manager.parseAnimation(n({keyframes:p},a)),s.anim=c,i.addChildAt(c.group,0),this.managerLife.forEach((function(t){c.on(t,(function(e){return s.emit(t,e)}))})),c.isImagesLoaded&&s.emit("success",{}),[2]}}))}))},s.prototype.remove=function(t){var e=t.component,s=this.renderSystem.containerManager.getContainer(t.gameObject.id);s&&s.removeChild(e.anim.group),e.anim=null},s.systemName="LottieSystem",s=a([e.decorators.componentObserver({Lottie:[]})],s)}(s.Renderer),Ge=function(t){function s(e){var s=t.call(this)||this;return s.loadStatus=!1,s.firstPlay=null,s.prevSlot={},s.currentSlot={},s.options=n({autoStart:!1},e),s.on("success",(function(){s.loadStatus=!0;for(var t=s.anim.keyframes,e=t.ip,i=t.op,h=function(t){var e="@"+t;s.anim.on(e,(function(t){return s.emit(e,t)}))},r=e;r<=i;r++)h(r);s.firstPlay&&s.firstPlay()})),s}return r(s,t),s.prototype.play=function(t,e){var s=this;if(void 0===t&&(t=[]),void 0===e&&(e={repeats:0}),this.loadStatus){var h=e.slot;(void 0===h?[]:h).forEach((function(t){var e=t.name,h=t.type,r=t.value,n=t.style,a=void 0===n?{}:n,o=a.x,l=a.y,p=a.anchor,c=void 0===p?{x:0,y:0}:p,u=a.pivot,d=void 0===u?{x:0,y:0}:u,f=a.width,m=a.height;"IMAGE"===h?s.currentSlot[e]=i.Sprite.from(r):"TEXT"===h&&(s.currentSlot[e]=new i.Text(r,new i.TextStyle(a))),o&&(s.currentSlot[e].x=o),l&&(s.currentSlot[e].y=l),f&&(s.currentSlot[e].width=f),m&&(s.currentSlot[e].height=m),s.currentSlot[e].anchor.set(c.x||0,c.y||0),s.currentSlot[e].pivot.set(s.currentSlot[e].width*(d.x||0),s.currentSlot[e].height*(d.y||0)),s.prevSlot[e]&&s.anim.unbindSlot(e,s.prevSlot[e]),s.anim.bindSlot(e,s.currentSlot[e]),s.prevSlot[e]=s.currentSlot[e]})),this.anim.playSegment(this.playParamsHandle(t),e)}else this.firstPlay=function(){s.play(t,e)}},s.prototype.playParamsHandle=function(t){var e=[].concat(t),s=this.anim.keyframes;return!e.length||e.length>2?e=[s.ip,s.op]:1===e.length&&(e=[e[0]%s.op,s.op]),e},s.prototype.onTap=function(t,e){var s=this,h=new i.Graphics;this.on("success",(function(){var i=s.anim.querySelector(t),r=i.display;h.beginFill(16777215),h.drawRect(0,0,100,100),h.endFill(),h.alpha=0,r.addChild(h),i.display.interactive=!0,i.display.on("pointertap",(function(){e()}))}))},s.componentName="Lottie",a([e.decorators.IDEProp],s.prototype,"slot",void 0),s}(e.Component);t.Lottie=Ge,t.LottieSystem=Ye,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@eva/eva.js"),require("@eva/plugin-renderer"),require("pixi.js")):"function"==typeof define&&define.amd?define(["exports","@eva/eva.js","@eva/plugin-renderer","pixi.js"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).EVA=t.EVA||{},t.EVA.plugin=t.EVA.plugin||{},t.EVA.plugin.renderer=t.EVA.plugin.renderer||{},t.EVA.plugin.renderer.lottie={}),t.EVA,t.EVA.plugin.renderer,t.PIXI);
