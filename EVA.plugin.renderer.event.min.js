var e,t;e=this,t=function(e,t,n,o){"use strict";var r,i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}e.HIT_AREA_TYPE=void 0,(r=e.HIT_AREA_TYPE||(e.HIT_AREA_TYPE={})).Circle="Circle",r.Ellipse="Ellipse",r.Polygon="Polygon",r.Rect="Rect",r.RoundedRect="RoundedRect";var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hitArea=void 0,t}return a(t,e),t.prototype.init=function(e){e&&Object.assign(this,e)},t.componentName="Event",t}(t.Component),l={Circle:o.Circle,Ellipse:o.Ellipse,Polygon:o.Polygon,Rect:o.Rectangle,RoundedRect:o.RoundedRectangle},d={Circle:["x","y","radius"],Ellipse:["x","y","width","height"],Rect:["x","y","width","height"],RoundedRect:["x","y","width","height","radius"],Polygon:["paths"]},u=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="Event",t}return a(o,e),o.prototype.init=function(){this.renderSystem=this.game.getSystem(n.RendererSystem),this.renderSystem.rendererManager.register(this)},o.prototype.componentChanged=function(e){switch(e.type){case t.OBSERVER_TYPE.ADD:this.add(e);break;case t.OBSERVER_TYPE.REMOVE:this.remove(e);break;case t.OBSERVER_TYPE.CHANGE:this.change(e)}},o.prototype.add=function(e){var t=this.containerManager.getContainer(e.gameObject.id);t.interactive=!0,t.interactiveChildren=!0;var n=e.component;n.hitArea&&this.addHitArea(e,t,n.hitArea),t.on("pointertap",(function(e){n.emit("tap",{stopPropagation:function(){return e.stopPropagation()},data:{pointerId:e.data.pointerId,position:{x:e.data.global.x,y:e.data.global.y}},gameObject:n.gameObject})})),t.on("pointerdown",(function(e){n.emit("touchstart",{stopPropagation:function(){return e.stopPropagation()},data:{pointerId:e.data.pointerId,position:{x:e.data.global.x,y:e.data.global.y}},gameObject:n.gameObject})})),t.on("pointermove",(function(e){n.emit("touchmove",{stopPropagation:function(){return e.stopPropagation()},data:{pointerId:e.data.pointerId,position:{x:e.data.global.x,y:e.data.global.y}},gameObject:n.gameObject})})),t.on("pointerup",(function(e){n.emit("touchend",{stopPropagation:function(){return e.stopPropagation()},data:{pointerId:e.data.pointerId,position:{x:e.data.global.x,y:e.data.global.y}},gameObject:n.gameObject})})),t.on("pointerupoutside",(function(e){n.emit("touchendoutside",{stopPropagation:function(){return e.stopPropagation()},data:{pointerId:e.data.pointerId,position:{x:e.data.global.x,y:e.data.global.y}},gameObject:n.gameObject})})),t.on("pointercancel",(function(e){n.emit("touchcancel",{stopPropagation:function(){return e.stopPropagation()},data:{pointerId:e.data.pointerId,position:{x:e.data.global.x,y:e.data.global.y}},gameObject:n.gameObject})}))},o.prototype.remove=function(e){var t=this.containerManager.getContainer(e.gameObject.id);t.interactive=!1,t.off("tap"),t.off("pointerdown"),t.off("pointermove"),t.off("pointerup"),t.off("pointerupoutside"),t.off("pointercancel"),e.component.removeAllListeners()},o.prototype.change=function(e){var t=this.containerManager.getContainer(e.gameObject.id);t.interactive=!0;var n=e.component;n.hitArea?this.addHitArea(e,t,n.hitArea):n.hitArea=null},o.prototype.addHitArea=function(e,t,n){var o,r,i,a=n.type,c=n.style;if(l[a]){var u=[];try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(d[a]),f=s.next();!f.done;f=s.next()){var g=f.value;u.push(c[g])}}catch(e){o={error:e}}finally{try{f&&!f.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}var y=new((i=l[a]).bind.apply(i,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}([void 0],u)));t.hitArea=y}else console.error(e.gameObject.name+"'s hitArea type is not defined")},o.systemName="Event",o=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;p>=0;p--)(r=e[p])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([t.decorators.componentObserver({Event:[{prop:["hitArea"],deep:!0}]})],o)}(n.Renderer);e.Event=c,e.EventSystem=u,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@eva/eva.js"),require("@eva/plugin-renderer"),require("pixi.js")):"function"==typeof define&&define.amd?define(["exports","@eva/eva.js","@eva/plugin-renderer","pixi.js"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).EVA=e.EVA||{},e.EVA.plugin=e.EVA.plugin||{},e.EVA.plugin.renderer=e.EVA.plugin.renderer||{},e.EVA.plugin.renderer.event={}),e.EVA,e.EVA.plugin.renderer,e.PIXI);
